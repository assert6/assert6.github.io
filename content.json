{"meta":{"title":"æ–­è¨€è¯´-æ–­è¨€å¾ˆæºœ","subtitle":"æ–­è¨€æ€ä¹ˆè¯´","description":"","author":"å¼ åŸé“­","url":"https://assert6.github.io","root":"/"},"pages":[{"title":"","date":"2023-09-25T02:53:40.066Z","updated":"2023-09-25T02:53:40.066Z","comments":true,"path":"about/index.html","permalink":"https://assert6.github.io/about/index.html","excerpt":"","text":"å¼ åŸé“­ Hyperf å¼€å‘ç»„æˆå‘˜, å‰Swoft å¼€å‘ç»„æˆå‘˜ æ›¾ä»»KKé›†å›¢ | æ·±åœ³åç«¯ç»„è´Ÿè´£äºº (2021.07 - 2023.02)è´Ÿè´£å…¨é›†å›¢åç«¯å²—ä½æŠ€æœ¯åˆé¢, è¿‘ä¸€å¹´ç­›é€‰ç®€å†400+ é¢è¯•150+æ‹…ä»»KKè®²å¸ˆ, ä¸ºåç«¯åŒäº‹æä¾›æŠ€æœ¯åŸ¹è®­, è‘—æœ‰ã€ŠHyperf æ­£ç¡®æ‰“å¼€æ–¹å¼ã€‹ã€ã€Šæ‰‹æŠŠæ‰‹æ‹†è§£Hyperfã€‹åˆ¶å®šåç«¯å·¥ä½œæµç¨‹è§„èŒƒ, æ¢³ç†CodeReview è§„èŒƒåŠæ¨¡æ¿, é€šè¿‡å®‰åˆ©å¿«æ·é”®åŠæ‰©å±•, æé«˜å…¨å‘˜å¼€å‘æ•ˆç‡å¼€å±•IDP é¢è°ˆ, è¿›ä¸€æ­¥æ¿€å‘å›¢é˜Ÿæˆå‘˜çš„ç›®æ ‡æ„Ÿ, æé«˜å›¢é˜Ÿä¸»åŠ¨æ€§å’ŒOwner æ„è¯† KKé›†å›¢ | ç”µå•†ä¸­å°éƒ¨æŠ€æœ¯è´Ÿè´£äºº (2018.12 - 2021.07)è´Ÿè´£ç”µå•†ä¸­å°éƒ¨ç³»ç»ŸæŠ€æœ¯æ¶æ„é€‰å‹, å‚ä¸å›¢é˜Ÿæ—¥å¸¸éœ€æ±‚åŠæŠ€æœ¯æ–¹æ¡ˆè¯„å®¡ä¸»å¯¼å®ŒæˆåŸFPM æ¡†æ¶è¿ç§»Hyperfã€å•ä½“æ¶æ„æ‹†åˆ†å¾®æœåŠ¡æ¶æ„ã€åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆç­‰é‡éš¾ç‚¹æŠ€æœ¯çªç ´å…¼ä»»ç³»ç»Ÿè¿ç»´å·¥ä½œ, å®Œæˆç”Ÿäº§ç¯å¢ƒSwarm è¿ç§»K8s é›†ç¾¤, æ­å»ºçº¿ä¸Šç¯å¢ƒè‡ªåŠ¨éƒ¨ç½²ã€ç›‘æ§ã€æ—¥å¿—ã€æŠ¥è­¦ç­‰è¿ç»´å·¥ä½œ å‰æµ·æœæ ‘è´¢å¯Œ | åç«¯å·¥ç¨‹å¸ˆ (2018.03 - 2018.12)è´Ÿè´£å…¬å¸ä¸šåŠ¡ç³»ç»Ÿçš„å¼€å‘ã€ç»´æŠ¤åŠè¿ç»´å·¥ä½œå‚ä¸å…¬å¸ä¸šåŠ¡ç³»ç»Ÿçš„æŠ€æœ¯é€‰å‹ã€æ¶æ„è®¾è®¡ã€æŠ€æœ¯æ–¹æ¡ˆè¯„å®¡å‚ä¸å…¬å¸ä¸šåŠ¡ç³»ç»Ÿçš„æ€§èƒ½ä¼˜åŒ–ã€å®‰å…¨åŠ å›ºã€ä»£ç é‡æ„ç­‰å·¥ä½œ é¡¹ç›®ç»éªŒæ·±åº¦å‚ä¸æ–°é›¶å”®è¡Œä¸šå…¨é“¾è·¯é¡¹ç›®å¼€å‘, æ¶µç›–é›¶å”®ç»ˆç«¯POS ç³»ç»Ÿã€ç”µå•†ç³»ç»Ÿã€ä¾›åº”é“¾ç³»ç»Ÿã€ä»“å‚¨ç³»ç»Ÿã€ERP ç³»ç»Ÿ, ä»¥åŠå®¢åˆ¶åŒ–ç³»ç»Ÿçš„å•†ä¸šåŒ–è½¬å‹ç»éªŒ; FPM æ¡†æ¶è¿ç§»Hyperf é¡¹ç›®èƒŒæ™¯ 2019å¹´ä¹‹å‰, å…¬å¸ç”µå•†ä¸šåŠ¡ç³»ç»Ÿé‡‡ç”¨FPM æ¡†æ¶å¼€å‘, ç”±äºFPM åŒæ­¥é˜»å¡çš„æ¨¡å‹å†³å®šäº†æ€§èƒ½æ— æ³•å¾—åˆ°æ•°é‡çº§çš„æå‡, æ¡†æ¶æ•´ä½“å·²ç»æ— æ³•æ»¡è¶³å…¬å¸ç”µå•†ä¸šåŠ¡ç³»ç»Ÿçš„å¿«é€Ÿå‘å±•éœ€æ±‚ æ­¤æ—¶æ¯é€¢ä¸šåŠ¡é«˜å³°æœŸ, ä¸šåŠ¡ç³»ç»Ÿçš„å“åº”æ—¶é—´éƒ½ä¼šè¾¾åˆ°ç§’çº§, ä¸¥é‡å½±å“ç”¨æˆ·ä½“éªŒ, ç”šè‡³å¯¼è‡´ä¸šåŠ¡ç³»ç»Ÿå®•æœº, ä¸¥é‡å½±å“å…¬å¸ä¸šåŠ¡ åœ¨æ­¤èƒŒæ™¯ä¸‹, ç”±æˆ‘ä¸»å¯¼å°†å…¬å¸ç”µå•†ä¸šåŠ¡ç³»ç»Ÿè¿ç§»Hyperf æ¡†æ¶, ä»¥æœŸå®ç°ä¸šåŠ¡ç³»ç»Ÿçš„æ€§èƒ½æå‡ é¡¹ç›®äº®ç‚¹ é€šè¿‡Hyperf æ¡†æ¶çš„åç¨‹æ¨¡å‹, ä½¿å¾—ä¸šåŠ¡ç³»ç»Ÿæ€§èƒ½å¾—åˆ°æ•°é‡çº§çš„æå‡, ä¸šåŠ¡ç³»ç»ŸQPS ä»åŸæ¥çš„300+ æå‡åˆ°äº†3000+ åœ¨ç»è¿‡åŠå¹´çš„ä½¿ç”¨è¿‡ç¨‹ä¸­, ä¸šåŠ¡ç³»ç»Ÿç¨³å®šæ€§å¾—åˆ°äº†å¤§å¹…åº¦çš„æå‡, å¹³ç¨³åº¦è¿‡618 å¤§ä¿ƒå, Hyperf åœ¨620 å¼€æº æ‘¸ç´¢å‡ºäº†FPM æ¡†æ¶è¿ç§»Hyperf çš„æœ€ä½³å®è·µ, ä¹Ÿæ˜¯é¦–ä¸ªHyperf æ¡†æ¶çš„ç”Ÿäº§ç¯å¢ƒåº”ç”¨, ä¸ºå…¬å¸ä¸šåŠ¡ç³»ç»Ÿçš„å¿«é€Ÿå‘å±•æä¾›äº†å¯é çš„æŠ€æœ¯ä¿éšœ å•ä½“æ¶æ„æ‹†åˆ†å¾®æœåŠ¡ é¡¹ç›®èƒŒæ™¯ å…¬å¸ç”µå•†ä¸šåŠ¡ç³»ç»Ÿåœ¨è¿ç§»Hyperf ä¹‹åˆ, è¿˜æ˜¯ä¿æŒå•ä½“æ¶æ„å¼€å‘, ç”±äºå•ä½“æ¶æ„çš„ä»£ç è€¦åˆåº¦é«˜, ä¸šåŠ¡ç³»ç»Ÿçš„æ‰©å±•æ€§å·®, åºå¤§çš„å•ä½“ä»£ç åº“å·²ç»ä¸¥é‡é™åˆ¶äº†ä¸šåŠ¡ç³»ç»Ÿçš„å¿«é€Ÿè¿­ä»£ åºå¤§çš„ä»£ç åº“å¯¼è‡´æ— æ³•å¿«é€Ÿç¼–è¯‘, åœ¨Hyperf 2 ç‰ˆæœ¬æ—¶, å†·å¯åŠ¨ä¸€æ¬¡éœ€è¦7åˆ†é’Ÿ, ä¸¥é‡å½±å“å¼€å‘æ•ˆç‡, ç”šè‡³å¯¼è‡´ä¿®å¤çº¿ä¸ŠBUG æ—¶æ— æ³•å¿«é€Ÿå‘å¸ƒä¸Šçº¿ å•ä½“æ¶æ„çš„å¼¹æ€§ä¼¸ç¼©èƒ½åŠ›å·®, å•ä¸ªä¸šåŠ¡æ¨¡å—çš„æ€§èƒ½ç“¶é¢ˆä¼šæ‹–ç´¯æ•´ä¸ªä¸šåŠ¡ç³»ç»Ÿçš„æ€§èƒ½, åªèƒ½æ•´ä½“æ‰©å®¹æ— æ³•é’ˆå¯¹å•æ¨¡å—æ‰©å®¹, æµªè´¹äº†å¤§é‡çš„æœåŠ¡å™¨èµ„æº é¡¹ç›®äº®ç‚¹ é€šè¿‡å¾®æœåŠ¡æ¶æ„, å°†åºå¤§çš„å•ä½“ä»£ç åº“æ‹†åˆ†æˆå¤šä¸ªå¾®æœåŠ¡, å¼¹æ€§ä¼¸ç¼©èƒ½åŠ›ã€å¼€å‘æ•ˆç‡ã€ç¨³å®šæ€§å¾—åˆ°å¤§å¹…åº¦çš„æå‡, ä¹ŸåŠ å¼ºäº†ä¸šåŠ¡ç³»ç»Ÿçš„å¿«é€Ÿè¿­ä»£èƒ½åŠ› æœåŠ¡é—´é‡‡ç”¨serialize åè®®çš„RPC è°ƒç”¨, ä¸ä¼ ç»ŸJSON RPC è°ƒç”¨ç›¸æ¯”, å‚æ•°å¯ä»¥ä¼ é€’å¯¹è±¡, æ›´åŠ é¢å‘å¯¹è±¡, ä»£ç æ›´ç®€æ´æ˜“ç†è§£, æ›´é€‚åˆå›¢é˜Ÿåä½œå¼€å‘ é€šè¿‡å¼€å‘ç†”æ–­ã€é™çº§ã€é“¾è·¯è¿½è¸ªç­‰é€»è¾‘, åœ¨ä¸šåŠ¡æµé‡æ´ªå³°æ—¶, ä¿è¯äº†å¾®æœåŠ¡æ¶æ„çš„ç¨³å®šæ€§, ä¹Ÿé¡ºåŠ¿å¼€æºç›¸å…³ç»„ä»¶ä»£ç , ä¸ºç¤¾åŒºè´¡çŒ®äº†ä¸€ä»½åŠ›é‡ ç”µå•†å°ç¨‹åºå¹³å°åŒ– é¡¹ç›®èƒŒæ™¯ åœ¨KK å“ç‰Œç”µå•†ä¸šåŠ¡æ•´ä½“è“¬å‹ƒå‘å±•çš„èƒŒæ™¯ä¸‹, é›†å›¢å†…çš„TheColoristã€X11ã€è°ƒè‰²ä¹‹å®¶ç­‰çº¿ä¸‹é›¶å”®å“ç‰Œ, ä¹Ÿå¼€å§‹ç­¹æªèµ„æº, å‡†å¤‡å‘å±•çº¿ä¸Šç”µå•†ä¸šåŠ¡ ä¸ºäº†ç»Ÿä¸€ç®¡ç†çº¿ä¸Šç”µå•†ä¸šåŠ¡, é›†å›¢å†…çš„å„ä¸ªå“ç‰Œ, éƒ½éœ€è¦å¼€å‘è‡ªå·±çš„ç”µå•†å°ç¨‹åº, ä½†æ˜¯å„ä¸ªå“ç‰Œçš„ç”µå•†å°ç¨‹åºä¸šåŠ¡æ•°æ®è¦æ±‚ç›¸äº’éš”ç¦», ä¸èƒ½ç›¸äº’å½±å“ å‰æœŸè¿›è¡Œäº†è°ƒç ”, å„å“ç‰Œå°ç¨‹åºç‹¬ç«‹éƒ¨ç½²ä¼šå¯¼è‡´å¤§é‡èµ„æºæµªè´¹, å…¨é¢SaaS åŒ–çš„æ–¹æ¡ˆåˆ™æŠ•å…¥å¤§é£é™©é«˜, æ— æ³•å¿«é€Ÿè¿­ä»£, æœ€ç»ˆé€‰æ‹©äº†å¹³å°åŒ–çš„æ–¹æ¡ˆ é¡¹ç›®äº®ç‚¹ é€šè¿‡å¹³å°åŒ–çš„æ–¹æ¡ˆ, å°†å„ä¸ªå“ç‰Œçš„ç”µå•†å°ç¨‹åºä¸šåŠ¡æ•°æ®éš”ç¦», ä½†æ˜¯å…±äº«åŒä¸€å¥—åŸºç¡€è®¾æ–½, é™ä½äº†èµ„æºæµªè´¹, ä¹ŸèŠ‚çœäº†è¿ç»´æˆæœ¬ åœ¨åç»­æ­å»ºæ–°çš„é›¶å”®å“ç‰Œç”µå•†å°ç¨‹åºæ—¶, åªéœ€è¦åœ¨åŸæœ‰ç³»ç»Ÿè¿›è¡Œé…ç½®, å°±å¯ä»¥å¿«é€Ÿæ­å»ºå‡ºä¸€ä¸ªå…¨æ–°çš„ç”µå•†å°ç¨‹åº, ä¸åˆ°ä¸€å‘¨å³å¯ä¸Šçº¿ å¹³å°åŒ–ç»„ä»¶é€šè¿‡Hyperf AOPåŠDI åŠŸèƒ½, åœ¨ä¸ä¿®æ”¹åŸæœ‰ä¸šåŠ¡ä»£ç çš„æƒ…å†µä¸‹, å°†åº•å±‚çš„å¹³å°åŒ–é€»è¾‘æ³¨å…¥åˆ°å„ä¸ªæœåŠ¡ä¸­, é™ä½äº†å¼€å‘è€…çš„å­¦ä¹ æˆæœ¬ Agent ä»£ç†å•†æœåŠ¡ é¡¹ç›®èƒŒæ™¯ åœ¨ä¸‰å¹´ç–«æƒ…çš„å½±å“ä¸‹, æ•´ä¸ªé›¶å”®è¡Œä¸šæ”¶å…¥å‡ºç°ä¸‹æ»‘, æ­¤æ—¶çº¿ä¸Šç”µå•†çš„æˆ˜ç•¥æ–¹å‘å¿…é¡»ä»æœ‰è°ƒæ€§çš„å®£ä¼ è½¬å˜ä¸ºå¢åŠ å®é™…è¥æ”¶, æˆä¸ºå…¬å¸ä¸šç»©çš„å¦ä¸€ä¸ªé‡è¦æ”¯æŸ± è‡ªè¥å°ç¨‹åºçš„æµé‡è™½ç„¶æœ‰é€æ­¥æå‡, ä½†æ˜¯è¿œè¿œæ— æ³•ä¸æ·˜å®ã€äº¬ä¸œã€å¤©çŒ«ç­‰ç¬¬ä¸‰æ–¹å¹³å°ä¼åŠ, å¿…é¡»é€šè¿‡ç¬¬ä¸‰æ–¹å¹³å°çš„æµé‡, æ‰èƒ½å®ç°çº¿ä¸Šç”µå•†çš„å¿«é€Ÿå‘å±• å¦‚ä½•é€šè¿‡æŠ€æœ¯æ”¯æ’‘, ç»™è¿è¥å›¢é˜Ÿæä¾›æ›´å¥½çš„å·¥å…·, ä»è€Œå®ç°ç”µå•†æˆ˜ç•¥çš„Uå‹è½¬å¼¯, æ˜¯æŠ€æœ¯å›¢é˜Ÿéœ€è¦æ€è€ƒçš„é—®é¢˜ é¡¹ç›®äº®ç‚¹ é€šè¿‡å¯¹ç¬¬ä¸‰æ–¹å¹³å°æ¥å…¥æµç¨‹çš„æŠ½è±¡, å°†ç¬¬ä¸‰æ–¹å¹³å°æŠ½è±¡ä¸ºä¸€ä¸ªä¸ªçš„Adapter, é€šè¿‡Interface çº¦æŸ, ä½¿å¾—å¼€å‘åŒäº‹åç»­æ¥å…¥ç¬¬ä¸‰æ–¹å¹³å°æ—¶, åªéœ€è¦å®ç°å¯¹åº”çš„æ¥å£, å°±å¯ä»¥å¿«é€Ÿå®Œæˆè®¢å•åŒæ­¥ã€å•†å“åŒæ­¥ã€å•†å“åº“å­˜åŒæ­¥ç­‰åŠŸèƒ½ é€šè¿‡Hyperf AOPåŠŸèƒ½, å°è£…äº†@Shop æ³¨è§£, å¯ä»¥æ— æ„Ÿçš„å°†å„ä¸ªå¹³å°è´¦å·æ³¨å…¥åˆ°ä¸šåŠ¡é€»è¾‘ä¸­, è‡ªåŠ¨éå†å¹³å°è´¦å·ç»´åº¦, æ‰§è¡Œå¯¹åº”çš„ä¸šåŠ¡é€»è¾‘ å›½å†…å·²æ¥å…¥å°çº¢ä¹¦ã€äº¬ä¸œã€å¾—ç‰©ã€æŠ–éŸ³ã€å¤©çŒ«ã€æ‹¼å¤šå¤š, å›½å¤–è¦†ç›–ShopOnlineã€Tokopediaã€Tiktokã€Lazadaã€Shopee, æœªæ¥è¿˜ä¼šç»§ç»­æ‰©å±•æ›´å¤šçš„å¹³å° Agent ä»£ç†å•†æœåŠ¡ä¸Šçº¿çŸ­çŸ­ä¸€å¹´, è¥ä¸šé¢å·²ç»è¶…è¿‡äº†è‡ªè¥ç”µå•†å°ç¨‹åº, ä¸è¿è¥å›¢é˜Ÿä¸€èµ·å®ç°äº†å…¬å¸çš„ç”µå•†æˆ˜ç•¥Uå‹è½¬å¼¯ æˆ‘èƒ½æä¾›å¦‚æœæ˜¯åˆåˆ›å…¬å¸, å¯ä»¥æ»¡è¶³ä»åˆåˆ›åˆ°ä¸Šå¸‚å‰çš„æŠ€æœ¯æŠŠæ§, æ¶µç›–æŠ€æœ¯é€‰å‹ã€æ¶æ„è®¾è®¡ã€æŠ€æœ¯æ–¹æ¡ˆè¯„å®¡åŠå¼€å‘ã€æœåŠ¡éƒ¨ç½²ã€çº¿ä¸Šè¿ç»´ç­‰;å¦‚æœæ˜¯è¡Œä¸šç¿˜æ¥š, å¯ä»¥å‚ä¸éœ€æ±‚ç ”å‘ã€ç³»ç»Ÿé‡æ„, å¼€å±•å†…éƒ¨æŠ€æœ¯åŸ¹è®­, è§„èŒƒå·¥ä½œæµç¨‹åŠæ¨åŠ¨å†…æºé¡¹ç›®, å¸¦åŠ¨å›¢é˜Ÿæˆå‘˜çš„æŠ€æœ¯æˆé•¿; è”ç³»æˆ‘ å¾®ä¿¡: assert666 é‚®ç®±: &#122;&#x40;&#104;&#x79;&#x70;&#101;&#114;&#x66;&#x2e;&#x69;&#x6f; Github: https://github.com/assert6 åšå®¢: https://assert6.com/"},{"title":"æ ‡ç­¾","date":"2023-09-25T02:53:40.066Z","updated":"2023-09-25T02:53:40.066Z","comments":true,"path":"tags/index.html","permalink":"https://assert6.github.io/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"é‡åˆ°çš„æ–°é—®é¢˜ , å…ˆæŒ–å‘","slug":"TODO","date":"2023-09-25T02:53:40.050Z","updated":"2023-09-25T02:53:40.050Z","comments":true,"path":"2023-09-25/TODO/","link":"","permalink":"https://assert6.github.io/2023-09-25/TODO/","excerpt":"","text":"å£°æ³¢ç‰µå¼•æŸ WebGL æŒ–çŸ¿ éšå†™æœ¯ casperjs FPM è¿ç§»Hyperf è§£å†³æ–¹æ¡ˆ Hyperf Swoole è¿ç§»Swow è§£å†³æ–¹æ¡ˆ","categories":[],"tags":[]},{"title":"ã€Hyperf å…¥é—¨åˆ°ç²¾é€šã€‘AOP 02","slug":"hyperf/Hyperf å…¥é—¨åˆ°ç²¾é€š/ã€Hyperf å…¥é—¨åˆ°ç²¾é€šã€‘AOP 02","date":"2023-09-14T16:00:00.000Z","updated":"2023-09-25T02:53:40.050Z","comments":true,"path":"2023-09-14/hyperf/Hyperf å…¥é—¨åˆ°ç²¾é€š/ã€Hyperf å…¥é—¨åˆ°ç²¾é€šã€‘AOP 02/","link":"","permalink":"https://assert6.github.io/2023-09-14/hyperf/Hyperf%20%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A/%E3%80%90Hyperf%20%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A%E3%80%91AOP%2002/","excerpt":"","text":"AOP ä½¿ç”¨å…¥é—¨åŠé€‚ç”¨åœºæ™¯AOP ä¸Middleware éå¸¸ç›¸ä¼¼, å½“ä½ ç†Ÿç»ƒæŒæ¡Middleware æ—¶, ç›¸å½“äºä¹ŸæŒæ¡äº†AOPæˆ‘ä»¬å…ˆå›é¡¾ä¸‹Middleware è°ƒç”¨æµç¨‹:å¯ä»¥é€šè¿‡é…ç½®æˆ–è€…æ³¨è§£ä½¿ç”¨Middleware 123456789Router::get(&#x27;/&#x27;, &#x27;App\\Controller\\IndexController::index&#x27;, [&#x27;middleware&#x27; =&gt; [CorsMiddleware::class]]);#[Middleware(CorsMiddleware::class)]class IndexController&#123; ...&#125; Middleware ä½œä¸ºè§£è€¦ç¥å™¨, éå¸¸æ™®éçš„åº”ç”¨åœ¨å„ä¸ªæœåŠ¡ä¸­ä½†æ˜¯, è¿™ä¹ˆå¥½ç”¨çš„åŠŸèƒ½ä»…èƒ½ä½œç”¨åœ¨Controller ä¸Š, å²‚ä¸æ˜¯å¾ˆå¯æƒœ? AOP å¯ä»¥ç®€å•ç†è§£ä¸º, å¯ä»¥ä½œç”¨åœ¨ä»»ä½•Class çš„Middleware: 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152use Hyperf\\Di\\Aop\\ProceedingJoinPoint;class A&#123; public function test() &#123; echo &#x27;this A&#x27;.PHP_EOL; &#125;&#125;class B&#123; public function test() &#123; (new A())-&gt;test(); echo &#x27;this B&#x27;.PHP_EOL; &#125;&#125;(new B())-&gt;test();class AOP&#123; public array $classes = [ A::class, B::class, ]; public function process(ProceedingJoinPoint $proceedingJoinPoint) &#123; $className = $proceedingJoinPoint-&gt;className; $methodName = $proceedingJoinPoint-&gt;methodName; echo &quot;&#123;$className&#125;::&#123;$methodName&#125; Before&quot;.PHP_EOL; # ç›¸å½“äº $handler-&gt;handle($request); $result = $proceedingJoinPoint-&gt;process(); echo &quot;&#123;$className&#125;::&#123;$methodName&#125; After&quot;.PHP_EOL; return $result; &#125;&#125;// B::test Before// A::test Before// this A// A::test After// this B// B::test After AOP ä½¿ç”¨åœºæ™¯æœ‰å“ªäº›? å¯ä»¥æ€è€ƒMiddleware ä½¿ç”¨åœºæ™¯æœ‰å“ªäº›: Token é‰´æƒ ç­¾å&#x2F;éªŒç­¾, åŠ å¯†&#x2F;è§£å¯† æ—¥å¿—&#x2F;Tracer CORS â€¦. ä»¥ä¸Šåœºæ™¯æŠ½è±¡ä¸€ä¸‹, å¾—åˆ°ç»“è®º: Middleware é€‚ç”¨äºç³»ç»ŸåŠŸèƒ½ åŒç†, AOP ä¹Ÿé€‚ç”¨äºä»¥ä¸Šåœºæ™¯, ä»¥åŠå„ç§ç³»ç»ŸåŠŸèƒ½ Cacheable AsyncQueueMessage Retry Breaker Transaction RateLimit â€¦ ä»¥å¸¸ç”¨çš„äº‹åŠ¡ä¸¾ä¾‹ 1234567891011121314151617181920212223242526272829303132use Hyperf\\DbConnection\\Db;class A&#123; // æ™®é€šå†™æ³• public function foo() &#123; Db::beginTransaction(); try&#123; $model = Model::query()-&gt;where(&#x27;id&#x27;, 1)-&gt;first(); $model-&gt;name = &#x27;Hyperf&#x27;; $model-&gt;save(); Db::commit(); &#125; catch(\\Throwable $e)&#123; Db::rollBack(); &#125; return $model; &#125; // é—­åŒ…å†™æ³• public function bar() &#123; return Db::transaction(function () &#123; $model = Model::query()-&gt;where(&#x27;id&#x27;, 1)-&gt;first(); $model-&gt;name = &#x27;Hyperf&#x27;; $model-&gt;save(); return $model; &#125;); &#125;&#125; AOP æ­é…æ³¨è§£å†™æ³• 12345678910111213141516171819202122232425262728293031use Hyperf\\DbConnection\\Annotation\\Transactional;class A&#123; #[Transactional] public function test() &#123; $model = Model::query()-&gt;where(&#x27;id&#x27;, 1)-&gt;first(); $model-&gt;name = &#x27;Hyperf&#x27;; $model-&gt;save(); return $model; &#125;&#125;// è®²è§£è¯´æ˜, éå®é™…ä»£ç class TransactionAspect&#123; public array $annotations = [ Transactional::class, ]; public function process(ProceedingJoinPoint $proceedingJoinPoint) &#123; return Db::transaction(function () use ($proceedingJoinPoint) &#123; return $proceedingJoinPoint-&gt;process(); &#125; ); &#125;&#125; å•ä¸€åœºæ™¯ä¸‹, é—­åŒ…å†™æ³•ä¸æ³¨è§£AOP å·®åˆ«ä¸å¤§ ä½†å¦‚æœæ­¤æ—¶éœ€è¦åŠ éœ€æ±‚, æ˜“è¯»æ€§ä¼šæˆªç„¶ä¸åŒ: 123456789101112131415class A&#123; public function bar() &#123; return Cache::remember(function () &#123; Db::transaction(function () &#123; $model = Model::query()-&gt;where(&#x27;id&#x27;, 1)-&gt;first(); $model-&gt;name = &#x27;Hyperf&#x27;; $model-&gt;save(); return $model; &#125;); &#125;); &#125;&#125; 123456789101112class A&#123; #[Cacheable] #[Transactional] public function test() &#123; $model = Model::query()-&gt;where(&#x27;id&#x27;, 1)-&gt;first(); $model-&gt;name = &#x27;Hyperf&#x27;; $model-&gt;save(); return $model; &#125;&#125; AOP é¿å…å›è°ƒåœ°ç‹±, ä¸¾ä¾‹, éæ­£å¸¸ä¸šåŠ¡åœºæ™¯ 123456789101112131415class A&#123; #[Transactional] #[Cacheable] #[AtomicLock] #[Retry] #[RateLimit(create: 1, capacity: 3)] public function test() &#123; $model = Model::query()-&gt;where(&#x27;id&#x27;, 1)-&gt;first(); $model-&gt;name = &#x27;Hyperf&#x27;; $model-&gt;save(); return $model; &#125;&#125;","categories":[],"tags":[{"name":"Hyperf","slug":"Hyperf","permalink":"https://assert6.github.io/tags/Hyperf/"},{"name":"å…¥é—¨åˆ°ç²¾é€š","slug":"å…¥é—¨åˆ°ç²¾é€š","permalink":"https://assert6.github.io/tags/%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A/"}]},{"title":"ã€Hyperf å…¥é—¨åˆ°ç²¾é€šã€‘ä¼˜é›…èŒƒå¼ 05","slug":"hyperf/Hyperf å…¥é—¨åˆ°ç²¾é€š/ã€Hyperf å…¥é—¨åˆ°ç²¾é€šã€‘ä¼˜é›…èŒƒå¼ 05","date":"2023-09-14T16:00:00.000Z","updated":"2023-09-25T02:53:40.050Z","comments":true,"path":"2023-09-14/hyperf/Hyperf å…¥é—¨åˆ°ç²¾é€š/ã€Hyperf å…¥é—¨åˆ°ç²¾é€šã€‘ä¼˜é›…èŒƒå¼ 05/","link":"","permalink":"https://assert6.github.io/2023-09-14/hyperf/Hyperf%20%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A/%E3%80%90Hyperf%20%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A%E3%80%91%E4%BC%98%E9%9B%85%E8%8C%83%E5%BC%8F%2005/","excerpt":"","text":"ä¼˜é›…ç¼–ç¨‹èŒƒå¼æ–°å¢ä»£æ›¿ä¿®æ”¹ AOP ä¸Event","categories":[],"tags":[{"name":"Hyperf","slug":"Hyperf","permalink":"https://assert6.github.io/tags/Hyperf/"},{"name":"å…¥é—¨åˆ°ç²¾é€š","slug":"å…¥é—¨åˆ°ç²¾é€š","permalink":"https://assert6.github.io/tags/%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A/"}]},{"title":"ã€Hyperf å…¥é—¨åˆ°ç²¾é€šã€‘åç¨‹ 04","slug":"hyperf/Hyperf å…¥é—¨åˆ°ç²¾é€š/ã€Hyperf å…¥é—¨åˆ°ç²¾é€šã€‘åç¨‹ 04","date":"2023-09-14T16:00:00.000Z","updated":"2023-09-25T02:53:40.050Z","comments":true,"path":"2023-09-14/hyperf/Hyperf å…¥é—¨åˆ°ç²¾é€š/ã€Hyperf å…¥é—¨åˆ°ç²¾é€šã€‘åç¨‹ 04/","link":"","permalink":"https://assert6.github.io/2023-09-14/hyperf/Hyperf%20%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A/%E3%80%90Hyperf%20%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A%E3%80%91%E5%8D%8F%E7%A8%8B%2004/","excerpt":"","text":"å­åç¨‹çš„é€‚ç”¨åœºæ™¯Swoole&#x2F;Swow å¯¹æ¯”Python åŠNodejs åç¨‹, æœ€å¤§ç‰¹ç‚¹æ˜¯å¯ä»¥æ— ä¾µå…¥, æ¶¦ç‰©ç»†æ— å£° ç”šè‡³ç»å¤§å¤šæ•°ä»£ç å¯ä»¥æ— ç¼ç”±Laravel å¤åˆ¶åˆ°Hyperf, ç›´æ¥è·å¾—å‡ ä¸ªæ•°é‡çº§çš„æ€§èƒ½æå‡ ä½¿ç”¨å­åç¨‹çš„ç¼ºç‚¹: äº‹åŠ¡æ€§æ— æ³•ä¿è¯ é¡ºåºæ€§æ— æ³•ä¿è¯ ç†è§£æˆæœ¬é«˜(éœ€è¦æ˜ç¡®çŸ¥é“å“ªäº›ä¼šè§¦å‘åç¨‹åˆ‡æ¢) å¯¹ç«¯å‹åŠ›å¤§ å­åç¨‹çš„ä¼˜ç‚¹:$time &#x3D; x_1+x_2+x_3+â€¦.x_n$$time &#x3D; max(x_1,x_2,x_3,â€¦x_n)$ æé«˜å“åº”é€Ÿåº¦ æé«˜å“åº”é€Ÿåº¦ æé«˜å“åº”é€Ÿåº¦ ç»¼ä¸Šæ‰€è¿°, åœ¨å“ªäº›åœºæ™¯æ¨èä½¿ç”¨å­åç¨‹å‘¢?åœ¨ä¸éœ€è¦äº‹åŠ¡æ€§ä¿è¯ã€é¡ºåºæ€§æ²¡æœ‰å½±å“ã€å¯¹å­åç¨‹æœ‰ä¸€å®šç†è§£ã€å¯¹ç«¯å¯ä»¥æ‰¿å—å¤§å¹¶å‘ã€æ€¥éœ€æé«˜å“åº”é€Ÿåº¦çš„åœºæ™¯ä¸­ çˆ¬è™« 123456789101112131415use Hyperf\\Engine\\Coroutine;Coroutine::run(function () &#123; echo &quot;1&quot;; Coroutine::create(function () &#123; echo &quot;2&quot;; sleep(1); // è§¦å‘åç¨‹è°ƒåº¦ echo &quot;3&quot;; &#125;); Coroutine::create(function () &#123; echo &quot;4&quot;; &#125;);&#125;);\\Swow\\Sync\\waitAll(); éå¿…è¦ä¸ä½¿ç”¨å­åç¨‹ TODO æ‰‹åŠ¨ä½¿ç”¨å­åç¨‹","categories":[],"tags":[{"name":"Hyperf","slug":"Hyperf","permalink":"https://assert6.github.io/tags/Hyperf/"},{"name":"å…¥é—¨åˆ°ç²¾é€š","slug":"å…¥é—¨åˆ°ç²¾é€š","permalink":"https://assert6.github.io/tags/%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A/"}]},{"title":"ã€Hyperf å…¥é—¨åˆ°ç²¾é€šã€‘æ³¨è§£ 01","slug":"hyperf/Hyperf å…¥é—¨åˆ°ç²¾é€š/ã€Hyperf å…¥é—¨åˆ°ç²¾é€šã€‘æ³¨è§£ 01","date":"2023-09-14T16:00:00.000Z","updated":"2023-09-25T02:53:40.050Z","comments":true,"path":"2023-09-14/hyperf/Hyperf å…¥é—¨åˆ°ç²¾é€š/ã€Hyperf å…¥é—¨åˆ°ç²¾é€šã€‘æ³¨è§£ 01/","link":"","permalink":"https://assert6.github.io/2023-09-14/hyperf/Hyperf%20%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A/%E3%80%90Hyperf%20%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A%E3%80%91%E6%B3%A8%E8%A7%A3%2001/","excerpt":"","text":"æ³¨è§£ Annotation &#x2F; AttributePHP8 ä¹‹å‰æ³¨è§£ç§°ä¹‹ä¸ºAnnotationä½¿ç”¨doctrine/annotationsç»„ä»¶, é€šè¿‡ç‰¹å®šæ–‡æœ¬æ ¼å¼@Classè§£æå†…å®¹, å·²ç»æ·˜æ±°è¿™é‡Œä¸å±•å¼€ 12345678910use Hyperf\\HttpServer\\Annotation\\Controller;/** * @Controller(...) */class IndexController&#123; &#125; PHP8 ä¹‹åæ³¨è§£ç§°ä¹‹ä¸ºAttribute, PHP å®˜æ–¹æä¾›, ä½¿ç”¨æ–¹ä¾¿, æ€§èƒ½ä¼˜ç§€, æ ¼å¼ä¸º#[Class] 123456789101112131415use Hyperf\\HttpServer\\Annotation\\Controller;#[Controller(prefix: &#x27;/index&#x27;)]class IndexController&#123; &#125;# åå°„è·å–å±æ€§$reflectionClass = new ReflectionClass(IndexController::class);$attributes = $reflectionClass-&gt;getAttributes();foreach ($attributes as $attribute) &#123; print_r([$attribute-&gt;getName(), $attribute-&gt;getArguments()]);&#125; å®˜æ–¹ä»‹ç»: Attribute æä¾›äº†åœ¨ä»£ç ä¸­çš„å£°æ˜ä¸Šæ·»åŠ ç»“æ„åŒ–ã€æœºå™¨å¯è¯»çš„å…ƒæ•°æ®ä¿¡æ¯çš„èƒ½åŠ›ï¼šç±»ã€æ–¹æ³•ã€å‡½æ•°ã€å‚æ•°ã€å±æ€§å’Œç±»å¸¸é‡å¯ä»¥æ˜¯Attribute çš„ç›®æ ‡ã€‚ç„¶åå¯ä»¥ä½¿ç”¨åå°„ APIåœ¨è¿è¡Œæ—¶æ£€æŸ¥Attribute å®šä¹‰çš„å…ƒæ•°æ® ã€‚å› æ­¤ï¼ŒAttribute å¯ä»¥è¢«è®¤ä¸ºæ˜¯ç›´æ¥åµŒå…¥åˆ°ä»£ç ä¸­çš„é…ç½®è¯­è¨€ã€‚ æ³¨è§£å¯ä»¥ç®€å•ç†è§£ä¸º, å†™æ­»åœ¨ä»£ç (ç±»ã€æ–¹æ³•ã€å‡½æ•°ã€å‚æ•°ã€å±æ€§å’Œç±»å¸¸é‡)ä¸Šçš„é…ç½®é¡¹ è‡ªå®šä¹‰ä¸€ä¸ªAttribute12345678910use Attribute;#[Attribute(Attribute::TARGET_CLASS_CONSTANT)]class Message&#123; public function __construct(public string $text) &#123; &#125;&#125; å¯ä»¥å®ç°ä¸€ä¸ªç®€æ˜“ç‰ˆæšä¸¾ç±» 123456789101112131415161718192021222324use Message;class ErrorCode&#123; #[Message(&#x27;æˆåŠŸ&#x27;)] public const SUCCESS = 0; #[Message(&#x27;ç³»ç»Ÿå‚æ•°é”™è¯¯&#x27;)] public const ERROR = 1; public static function getMessage(int $code): string &#123; $reflectionClass = new ReflectionClass(ErrorCode::class); $constants = $reflectionClass-&gt;getReflectionConstants(); foreach ($constants as $constant) &#123; if ($constant-&gt;getValue() === $code) &#123; $attributes = $constant-&gt;getAttributes(Message::class); return $attributes[0]-&gt;newInstance()-&gt;text; &#125; &#125; return &#x27;&#x27;; &#125;&#125;echo ErrorCode::getMessage(ErrorCode::SUCCESS); æ³¨æ„, Hyperf è‡ªå¸¦çš„ä¸€äº›æ³¨è§£, åŠŸèƒ½å¼ºå¤§, æ¯”å¦‚: Inject Controller Cacheable ä½†è¿™æ˜¯å› ä¸ºAOP çš„å¼ºå¤§, å¹¶éæ³¨è§£å¼ºå¤§, åé¢ä»‹ç»AOP","categories":[],"tags":[{"name":"Hyperf","slug":"Hyperf","permalink":"https://assert6.github.io/tags/Hyperf/"},{"name":"å…¥é—¨åˆ°ç²¾é€š","slug":"å…¥é—¨åˆ°ç²¾é€š","permalink":"https://assert6.github.io/tags/%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A/"}]},{"title":"ã€Hyperf å…¥é—¨åˆ°ç²¾é€šã€‘ç”Ÿå‘½å‘¨æœŸ 03","slug":"hyperf/Hyperf å…¥é—¨åˆ°ç²¾é€š/ã€Hyperf å…¥é—¨åˆ°ç²¾é€šã€‘ç”Ÿå‘½å‘¨æœŸ 03","date":"2023-09-14T16:00:00.000Z","updated":"2023-09-25T02:53:40.050Z","comments":true,"path":"2023-09-14/hyperf/Hyperf å…¥é—¨åˆ°ç²¾é€š/ã€Hyperf å…¥é—¨åˆ°ç²¾é€šã€‘ç”Ÿå‘½å‘¨æœŸ 03/","link":"","permalink":"https://assert6.github.io/2023-09-14/hyperf/Hyperf%20%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A/%E3%80%90Hyperf%20%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A%E3%80%91%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%2003/","excerpt":"","text":"ç”Ÿå‘½å‘¨æœŸä¸å˜é‡ä½œç”¨èŒƒå›´Laravel ç”Ÿå‘½å‘¨æœŸæ˜¯ç”±FPM å†³å®šçš„, åŒæ ·Hyperf ç”Ÿå‘½å‘¨æœŸæ˜¯ç”±Swoole ç”Ÿå‘½å‘¨æœŸå†³å®šçš„ ä»¥HTTP æœåŠ¡ä¸ºä¾‹, é€šè¿‡ä»£ç è§£é‡Šä¸€ä¸‹ç”Ÿå‘½å‘¨æœŸ, å¦‚æœä½¿ç”¨ä¸å½“, ä¼šé€ æˆå†…å­˜æ³„æ¼ã€æ•°æ®æ··æ·†, å¼•å‘ç”Ÿäº§äº‹æ•… å…¨å±€ç”Ÿå‘½å‘¨æœŸ(è¿›ç¨‹ç”Ÿå‘½å‘¨æœŸ) è¯·æ±‚ç”Ÿå‘½å‘¨æœŸ åç¨‹ç”Ÿå‘½å‘¨æœŸ 12345678910111213141516171819require_once __DIR__ . &#x27;/vendor/autoload.php&#x27;;use Hyperf\\Engine\\Http\\Server;use Hyperf\\HttpMessage\\Server\\Response;use Psr\\Http\\Message\\ServerRequestInterface;use Swow\\Psr7\\Server\\ServerConnection;$a = 0;$server = new Server();$server-&gt;bind(&#x27;0.0.0.0&#x27;, 9502);$server-&gt;handle(function (ServerRequestInterface $request, ServerConnection $connection) &#123; $b = 0; $response = new Response(); $connection-&gt;sendHttpResponse($response-&gt;withContent(&#x27;Hello World&#x27;))-&gt;close();&#125;);$server-&gt;start(); å…¨å±€ç”Ÿå‘½å‘¨æœŸ, å†…å­˜é‡Œä¸€ç›´å­˜åœ¨, ç¨‹åºç»“æŸæ‰ä¼šé‡Šæ”¾ start() å‰èµ‹å€¼çš„å˜é‡ ç±»é™æ€å±æ€§ è¶…å…¨å±€å˜é‡ 12345678910111213141516171819202122232425262728293031323334353637383940414243&lt;?phprequire_once __DIR__ . &#x27;/vendor/autoload.php&#x27;;use Hyperf\\Engine\\Http\\Server;use Hyperf\\HttpMessage\\Server\\Response;use Psr\\Http\\Message\\ServerRequestInterface;use Swow\\Psr7\\Server\\ServerConnection;class Count&#123; public static int $count = 0;&#125;$count = 0;$globalCount = 0;$_GET[&#x27;count&#x27;] = 0;$server = new Server();$server-&gt;bind(&#x27;0.0.0.0&#x27;, 9502);$server-&gt;handle(function (ServerRequestInterface $request, ServerConnection $connection) use (&amp;$count) &#123; global $globalCount; // start() å‰å£°æ˜çš„å˜é‡ $globalCount++; $count++; // ç±»é™æ€å˜é‡ Count::$count++; // è¶…å…¨å±€å˜é‡ $_GET[&#x27;count&#x27;]++; echo &quot;Global \\$count: &#123;$globalCount&#125;\\n&quot;; echo &quot;Global \\$globalCount: &#123;$globalCount&#125;\\n&quot;; echo &quot;Global Count::count &quot; . Count::$count . &quot;\\n&quot;; echo &quot;Global \\$_GET &#123;$_GET[&#x27;count&#x27;]&#125; \\n&quot;; $connection-&gt;sendHttpResponse((new Response())-&gt;withContent(&#x27;Hello World&#x27;))-&gt;close();&#125;);$server-&gt;start(); ä»£ç ç”Ÿå‘½å‘¨æœŸå°äºå˜é‡ä½œç”¨èŒƒå›´æ‰å¯èƒ½å‡ºç°å†…å­˜æ³„æ¼æ¯”å¦‚è¯·æ±‚ç”Ÿå‘½å‘¨æœŸå†…, æ“ä½œå…¨å±€å˜é‡ 12345678910111213141516171819require_once __DIR__ . &#x27;/vendor/autoload.php&#x27;;use Hyperf\\Engine\\Http\\Server;use Hyperf\\HttpMessage\\Server\\Response;use Psr\\Http\\Message\\ServerRequestInterface;use Swow\\Psr7\\Server\\ServerConnection;$globalCount = [];$server = new Server();$server-&gt;bind(&#x27;0.0.0.0&#x27;, 9502);$server-&gt;handle(function (ServerRequestInterface $request, ServerConnection $connection) &#123; global $globalCount; $globalCount[] = $request; $connection-&gt;sendHttpResponse((new Response())-&gt;withContent(&#x27;Hello World&#x27;))-&gt;close();&#125;);$server-&gt;start(); æ³¨æ„, ä¸Šè¿°ä»£ç ä¸­çš„$requestæœ¬èº«æ˜¯è¯·æ±‚ç”Ÿå‘½å‘¨æœŸ, ä½†æ˜¯èµ‹å€¼ç»™å…¨å±€ç”Ÿå‘½å‘¨æœŸçš„å˜é‡, å¯¼è‡´å˜é‡ä½œç”¨èŒƒå›´é€ƒé€¸ ä¸¾ä¸ªå¸¸ç”¨çš„ä¾‹å­ 1234567891011121314151617181920namespace App\\Controller;use Hyperf\\HttpServer\\Annotation\\Controller;use Hyperf\\HttpServer\\Annotation\\GetMapping;#[Controller]class IndexController extends AbstractController&#123; public int $count = 0; #[GetMapping(&quot;/add&quot;)] public function add() &#123; echo $this-&gt;count++, PHP_EOL; sleep(1); return $this-&gt;count; &#125;&#125; ä¸ºä»€ä¹ˆä»¥ä¸Šä»£ç ä¼šå‡ºç°æ•°æ®æ··æ·†? å…¶å®$count ä½œç”¨èŒƒå›´éš¶å±äºIndexController çš„IndexController ä»$container-&gt;$resolvedEntries è·å–$container åœ¨Swoole::start() å‰å£°æ˜, æ‰€ä»¥æ˜¯å…¨å±€ç”Ÿå‘½å‘¨æœŸå˜é‡ApplicationContext::getContainer() åªæ˜¯æ–¹ä¾¿ä½¿ç”¨, å¹¶ä¸æ˜¯æ ¹æœ¬åŸå› ","categories":[],"tags":[{"name":"Hyperf","slug":"Hyperf","permalink":"https://assert6.github.io/tags/Hyperf/"},{"name":"å…¥é—¨åˆ°ç²¾é€š","slug":"å…¥é—¨åˆ°ç²¾é€š","permalink":"https://assert6.github.io/tags/%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A/"}]},{"title":"ã€æ‰‹æŠŠæ‰‹æ•™ä½ ã€‘Hyperf æ¥å…¥OpenAI ChatGPT","slug":"hyperf/ã€æ‰‹æŠŠæ‰‹æ•™ä½ ã€‘Hyperf æ¥å…¥OpenAI (ChatGPT)","date":"2023-03-27T16:00:00.000Z","updated":"2023-09-25T02:53:40.054Z","comments":true,"path":"2023-03-27/hyperf/ã€æ‰‹æŠŠæ‰‹æ•™ä½ ã€‘Hyperf æ¥å…¥OpenAI (ChatGPT)/","link":"","permalink":"https://assert6.github.io/2023-03-27/hyperf/%E3%80%90%E6%89%8B%E6%8A%8A%E6%89%8B%E6%95%99%E4%BD%A0%E3%80%91Hyperf%20%E6%8E%A5%E5%85%A5OpenAI%20(ChatGPT)/","excerpt":"","text":"OpenAI æ˜¯ä»€ä¹ˆOpenAIæ˜¯ä¸€å®¶è‡´åŠ›äºäººå·¥æ™ºèƒ½ç ”ç©¶å’Œå‘å±•çš„å…¬å¸ï¼Œå…¶ç›®æ ‡æ˜¯åˆ›å»ºæ™®é€‚äººå·¥æ™ºèƒ½ï¼Œèƒ½å¤Ÿä¸ºäººç±»åˆ›é€ æ›´åŠ ç¹è£ã€å®‰å…¨å’Œå¯æŒç»­çš„æœªæ¥ã€‚ ä¸ºäº†å®ç°è¿™ä¸€ç›®æ ‡ï¼ŒOpenAIä¸ä»…å¼€å±•åŸºç¡€ç ”ç©¶ï¼Œè¿˜æä¾›å„ç§äººå·¥æ™ºèƒ½ç›¸å…³çš„å·¥å…·å’ŒæœåŠ¡ï¼ŒåŒ…æ‹¬APIæ¥å£ï¼Œä»¥æ–¹ä¾¿å¼€å‘è€…å¿«é€Ÿåº”ç”¨æœ€æ–°çš„äººå·¥æ™ºèƒ½æŠ€æœ¯ã€‚ OpenAI APIOpenAI APIæ˜¯ä¸€ç§é¢å‘å¼€å‘è€…çš„äººå·¥æ™ºèƒ½æœåŠ¡ï¼Œæä¾›å„ç§è¯­è¨€æ¨¡å‹å’Œè‡ªç„¶è¯­è¨€å¤„ç†å·¥å…·ã€‚å¼€å‘è€…å¯ä»¥ä½¿ç”¨OpenAI APIæ¥åˆ›å»ºæ™ºèƒ½åº”ç”¨ç¨‹åºï¼Œä¾‹å¦‚èŠå¤©æœºå™¨äººã€æ–‡æœ¬æ‘˜è¦å™¨å’Œæƒ…æ„Ÿåˆ†æå™¨ç­‰ã€‚ ç›®å‰ï¼ŒOpenAI APIæä¾›äº†ä»¥ä¸‹å‡ ç§æ¨¡å‹ï¼š GPT-3ï¼šç›®å‰æœ€å¤§çš„è¯­è¨€æ¨¡å‹ï¼Œå¯ç”Ÿæˆé«˜è´¨é‡çš„è‡ªç„¶è¯­è¨€æ–‡æœ¬ã€‚ DALL-Eï¼šä¸€ç§åŸºäºGPT-3çš„å›¾åƒç”Ÿæˆæ¨¡å‹ï¼Œå¯ä»¥æ ¹æ®æ–‡æœ¬è¾“å…¥ç”Ÿæˆç‹¬ç‰¹çš„å›¾åƒã€‚ CLIPï¼šä¸€ç§è§†è§‰æ¨¡å‹ï¼Œå¯ä»¥é€šè¿‡å›¾ç‰‡è¯†åˆ«æ ‡ç­¾å’Œæè¿°ï¼Œç”¨äºå›¾åƒåˆ†ç±»ã€æœç´¢å’Œç›¸ä¼¼åº¦åŒ¹é…ã€‚ Codexï¼šä¸€ä¸ªåŸºäºGPT-3çš„ä»£ç ç”Ÿæˆæ¨¡å‹ï¼Œå¯ä»¥é€šè¿‡ç®€çŸ­çš„è‡ªç„¶è¯­è¨€æŒ‡ä»¤ç”Ÿæˆä»£ç ã€‚ Tritonï¼šä¸€ç§ç”¨äºæ¨èç³»ç»Ÿå’Œä¸ªæ€§åŒ–æ¨èçš„æ¨¡å‹ã€‚ä½¿ç”¨OpenAI APIéœ€è¦å…ˆæ³¨å†Œä¸€ä¸ªå¼€å‘è€…è´¦æˆ·å¹¶åˆ›å»ºAPIå¯†é’¥ã€‚æ³¨å†ŒæˆåŠŸåï¼Œå¼€å‘è€…å¯ä»¥ä½¿ç”¨APIå¯†é’¥æ¥è°ƒç”¨OpenAI APIæä¾›çš„å„ç§æœåŠ¡ã€‚ æ¥å…¥OpenAI APIä»¥ä¸‹æ˜¯æ¥å…¥OpenAI APIçš„ä¸€èˆ¬æ­¥éª¤ï¼š æ³¨å†Œå¼€å‘è€…è´¦æˆ·å¹¶åˆ›å»ºAPIå¯†é’¥ã€‚åœ¨OpenAIç½‘ç«™ä¸Šæ³¨å†Œå¹¶åˆ›å»ºä¸€ä¸ªAPIå¯†é’¥ï¼Œç”¨äºè°ƒç”¨APIæœåŠ¡ã€‚ å®‰è£…OpenAI API SDKã€‚OpenAIæä¾›äº†å„ç§è¯­è¨€çš„SDKï¼ŒåŒ…æ‹¬Pythonã€JavaScriptã€Javaã€Rubyç­‰ï¼Œå¼€å‘è€…å¯ä»¥é€‰æ‹©é€‚åˆè‡ªå·±çš„SDKè¿›è¡Œå®‰è£…ã€‚ è°ƒç”¨APIæœåŠ¡ã€‚ä½¿ç”¨SDKæä¾›çš„APIæ¥å£å’Œå¯†é’¥ï¼Œå¼€å‘è€…å¯ä»¥è°ƒç”¨OpenAI APIæä¾›çš„å„ç§æœåŠ¡ã€‚ æ³¨æ„, ä»¥ä¸Šå…¨éƒ¨æ˜¯ç”±OpenAI ChatGPTç”Ÿæˆ Hyperf æ¥å…¥OpenAIæ¥å…¥OpenAI çš„æ­¥éª¤éå¸¸ç®€å•, ä¸Šé¢ChatGPT ä¹Ÿå·²ç»ç»™å‡ºäº†å¤§æ¦‚æ­¥éª¤, ä¸‹é¢ä¸¾ä¾‹å±•ç¤ºä¸€ä¸‹, é‡ç‚¹åœ¨äºç±»ä¼¼ChatGPT é€å­—å›å¤çš„EventStream çš„å®ç°. ç”ŸæˆAPIå¯†é’¥æˆ‘ä»¬éœ€è¦åœ¨OpenAIå®˜ç½‘æ³¨å†Œä¸€ä¸ªè´¦å·, ç„¶åç”Ÿæˆä¸€ä¸ªAPIå¯†é’¥, ä¿å­˜å¥½åé¢ä¼šç”¨åˆ°, æ³¨å†Œè´¦å·çš„æ•™ç¨‹éå¸¸å¤š, è¿™é‡Œå°±ä¸å†èµ˜è¿°äº†. å®‰è£…OpenAI SDKOpenAI å®˜æ–¹æä¾›äº†PHP SDK, ä½†è¦æ±‚PHP 8.1+ ç‰ˆæœ¬, æ»¡è¶³è¦æ±‚çš„è¯å¯ä»¥ç›´æ¥å®‰è£…ä½¿ç”¨ 1composer require openai-php/client æˆ–è€…åŸºäºHyperf å°è£…çš„Clientç»„ä»¶ 1composer require friendsofhyperf/openai-client SDK ä»£ç éå¸¸æ¸…æ™°, è¿™é‡Œä»¥å®˜æ–¹SDKä¸ºä¾‹, åˆ›å»ºClient é…ç½®å‚æ•°å³å¯è¯·æ±‚OpenAI, å„ä¸ªå‚æ•°çš„å«ä¹‰å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ 1234567891011public function index()&#123; $client = OpenAI::client(&#x27;æ›¿æ¢ç¬¬ä¸€æ­¥ç”Ÿæˆçš„APIå¯†é’¥&#x27;); $response = $client-&gt;completions()-&gt;create([ &#x27;model&#x27; =&gt; &#x27;text-davinci-003&#x27;, &#x27;prompt&#x27; =&gt; &#x27;Hyperf æ˜¯ä»€ä¹ˆ?&#x27;, &#x27;max_tokens&#x27; =&gt; 2048, ]); return $response-&gt;toArray();&#125; å¯åŠ¨Hyperf åè°ƒç”¨ä¸€ä¸‹, å°±å¯ä»¥çœ‹åˆ°OpenAI çš„å›å¤äº† é€å­—å›å¤ EventStreamå®Œæˆä¸Šé¢çš„æ­¥éª¤å, ä¼šå‘ç°ç­‰å¾…å“åº”å¤§æ¦‚6ç§’å·¦å³ç‰¹åˆ«ä¹…, æ˜¯å› ä¸ºæˆ‘ä»¬åŒæ­¥é˜»å¡ç­‰å¾…OpenAI æ‰€æœ‰å“åº”, åœ¨å…¨éƒ¨å‘é€ç»™å®¢æˆ·ç«¯,è€ŒChatGPT é‡‡ç”¨äº†EventStreamå¯ä»¥å¼‚æ­¥å“åº”é€å­—å›å¤, æ‰€ä»¥åœ¨ç­‰å¾…å›å¤æ—¶å¯ä»¥çœ‹åˆ°ChatGPT æ­£åœ¨å¤„ç†è¯·æ±‚, è¿™æ ·ä½“éªŒä¼šæ›´å¥½ä¸€äº›.åŒæ ·Hyperf æœ€æ–°ç‰ˆæœ¬ä¹Ÿæ”¯æŒäº†EventStream, å¯ä»¥éå¸¸æ–¹ä¾¿çš„å®ç°é€å­—å›å¤.ç¨å¾®ä¿®æ”¹ä¸‹ä¸Šé¢çš„ä»£ç  12345678910111213141516171819202122public function index()&#123; $client = OpenAI::client(&#x27;æ›¿æ¢ç¬¬ä¸€æ­¥ç”Ÿæˆçš„APIå¯†é’¥&#x27;); // æ³¨æ„è¿™é‡Œæ”¹ä¸ºäº†createStreamed æ–¹æ³• $result = $client-&gt;completions()-&gt;createStreamed([ &#x27;model&#x27; =&gt; &#x27;text-davinci-003&#x27;, &#x27;prompt&#x27; =&gt; &#x27;Hyperf æ˜¯ä»€ä¹ˆ?&#x27;, &#x27;max_tokens&#x27; =&gt; 2048, ]); // å¦‚æœæŠ¥é”™Argument #1 ($connection) must be of type Hyperf\\Engine\\Contract\\Http\\Writable // æˆ–è€…æ²¡æœ‰\\Hyperf\\Engine\\Http\\EventStream // è¯·æ›´æ–°engine(v1.10.0æˆ–v2.8.0)ã€engine-contract(v1.7.0)ã€hyperf/http-server(v3.0.14) $response = ApplicationContext::getContainer()-&gt;get(\\Hyperf\\HttpServer\\Contract\\ResponseInterface::class); $eventStream = new \\Hyperf\\Engine\\Http\\EventStream($response-&gt;getConnection()); foreach ($result as $stream) &#123; $eventStream-&gt;write($stream[&#x27;choices&#x27;][0][&#x27;text&#x27;]); &#125; $eventStream-&gt;end();&#125; æ³¨æ„ä»£ç æ”¹åŠ¨äº†ä¸‰å¤„, å…¶ä¸­ç¬¬ä¸€å¤„æ˜¯create æ–¹æ³•æ”¹ä¸ºcreateStreamed æ–¹æ³•, ç¬¬äºŒå¤„æ˜¯å»æ‰äº†è¿”å›å€¼return $response-&gt;toArray(), ç¬¬ä¸‰å¤„æ˜¯ä½¿ç”¨EventStream é€å­—å“åº”.å¯åŠ¨Hyperf åè°ƒç”¨ä¸€ä¸‹, å°±å¯ä»¥çœ‹åˆ°OpenAI çš„å›å¤äº†, å¹¶ä¸”å¯ä»¥çœ‹åˆ°é€å­—å“åº”çš„æ•ˆæœ: PS: mozilla EventStream æ ¼å¼","categories":[],"tags":[{"name":"Hyperf","slug":"Hyperf","permalink":"https://assert6.github.io/tags/Hyperf/"},{"name":"ChatGPT","slug":"ChatGPT","permalink":"https://assert6.github.io/tags/ChatGPT/"},{"name":"OpenAI","slug":"OpenAI","permalink":"https://assert6.github.io/tags/OpenAI/"}]},{"title":"Windows åŸç”Ÿç¯å¢ƒå¼€å‘Hyperf","slug":"hyperf/Windows åŸç”Ÿç¯å¢ƒå¼€å‘Hyperf","date":"2023-02-27T16:00:00.000Z","updated":"2023-09-25T02:53:40.054Z","comments":true,"path":"2023-02-27/hyperf/Windows åŸç”Ÿç¯å¢ƒå¼€å‘Hyperf/","link":"","permalink":"https://assert6.github.io/2023-02-27/hyperf/Windows%20%E5%8E%9F%E7%94%9F%E7%8E%AF%E5%A2%83%E5%BC%80%E5%8F%91Hyperf/","excerpt":"","text":"å¾ˆå¤šåŒå­¦åœ¨å¼€å‘Hyperf æ—¶, ä¼šé€‰æ‹©ä½¿ç”¨Docker, ä½†æ˜¯Docker åœ¨Windows ä¸‹çš„ä½“éªŒå¹¶ä¸æ˜¯å¾ˆå¥½, æœ‰æ—¶å€™ä¼šå‡ºç°å„ç§å„æ ·çš„é—®é¢˜, æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•åœ¨Windows åŸç”Ÿç¯å¢ƒä¸‹å¼€å‘Hyperf Box ä»‹ç» Box è‡´åŠ›äºå¸®åŠ©æå‡ PHP åº”ç”¨ç¨‹åºçš„ç¼–ç¨‹ä½“éªŒï¼Œå°¤å…¶æœ‰åŠ©äº Hyperf åº”ç”¨ï¼Œç®¡ç† PHP ç¯å¢ƒå’Œç›¸å…³ä¾èµ–ï¼ŒåŒæ—¶æä¾›å°† PHP åº”ç”¨ç¨‹åºæ‰“åŒ…ä¸ºäºŒè¿›åˆ¶ç¨‹åºçš„èƒ½åŠ›ï¼Œè¿˜æä¾›åå‘ä»£ç†æœåŠ¡æ¥ç®¡ç†å’Œéƒ¨ç½² Swoole&#x2F;Swow æœåŠ¡ ç®¡ç†PHP ç‰ˆæœ¬åŠä¾èµ–, è§„é¿å¤šä¸ªPHPç‰ˆæœ¬å¹¶å­˜æ—¶å…¼å®¹é—®é¢˜ æ‰“åŒ…ä»£ç ä¸ºäºŒè¿›åˆ¶ç¨‹åº, ä¸€ä¸ª.exeæ–‡ä»¶ç›´æ¥è·‘èµ·æ¥ åå‘ä»£ç†(ä¸æ˜¯é‡ç‚¹ğŸ¤£) å®‰è£…ä»¥Windows ä¸ºä¾‹, ç›´æ¥ä»Github releases ä¸‹è½½å¯¹åº”çš„äºŒè¿›åˆ¶æ–‡ä»¶, æ³¨æ„åç»­ç‰ˆæœ¬å¯èƒ½ä¼šæœ‰å˜åŒ–, è‡ªè¡Œä¸‹è½½æœ€æ–°ç‰ˆæœ¬æˆ–æ‰§è¡Œbox self-update å‡çº§ æ­£å¦‚å®˜æ–¹æ–‡æ¡ˆæ‰€è¯´, ä¸‹è½½çš„Box.exe è‡ªèº«å°±æ˜¯ä¸€ä¸ªåŸºäºBox æ‰“åŒ…å‡ºæ¥çš„Hyperf åº”ç”¨, è½»æ¾å®ç°è‡ªä¸¾ æ‰§è¡Œbox build-prepare åˆå§‹åŒ–Box æ‰€éœ€çš„ä¾èµ–, æ¢¯å­è¯·è‡ªå¤‡ ä½¿ç”¨Box ä¸‹è½½å®Œæˆå, å³å¯ä½¿ç”¨Box çš„Composer æ¥å®‰è£…Hyperf , è¿™é‡Œé€‰ç”¨Swow ç‰ˆæœ¬éª¨æ¶ 1box composer create-project hyperf/swow-skeleton è€å¿ƒç­‰å¾…, å®‰è£…å®Œæˆå, è¿›å…¥é¡¹ç›®ç›®å½•, æ‰§è¡Œ 123box php .\\bin\\hyperf.php start// ä¹Ÿå¯ä»¥ä½¿ç”¨box hyperf start å¯åŠ¨é¡¹ç›®æˆåŠŸå, å¯ä»¥æ„‰å¿«çš„åœ¨Windows ä¸‹å¼€å‘Hyperf äº†! æ‰“åŒ…æ‰“åŒ…æ˜¯Box å¦ä¸€é¡¹ç¥å¥‡çš„èƒ½åŠ›, å¿…é¡»è¦å°è¯•ä¸€ä¸‹ å½“æˆ‘ä»¬å¼€å‘å®Œæˆå, å¯ä»¥ä½¿ç”¨Box æ‰“åŒ…æˆäºŒè¿›åˆ¶æ–‡ä»¶, ä»¥ä¾¿äºäº¤ä»˜éƒ¨ç½² 1box build æ‰“åŒ…å®Œæˆå, å½“å‰è·¯å¾„ä¼šå‡ºç°ä¸€ä¸ªåä¸ºhyperf.exe çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œåç»­åªéœ€è¦é€šè¿‡hyperf start å‘½ä»¤å³å¯å¯åŠ¨è¯¥ Hyperf åº”ç”¨ æœ¬æ–‡ä¹Ÿç®—æ ‡é¢˜å…šäº†, å› ä¸ºBox äº†è§£çš„äººè¿˜æ˜¯éå¸¸å°‘çš„, ä½†Windows ä¸‹å¼€å‘Hyperf çš„éœ€æ±‚å¾ˆå¤š, æ‰€ä»¥å¼•ç”³å‡ºBox çš„ä½¿ç”¨ å½“ç„¶ç›®å‰Box è¿˜æ˜¯ä¸ªå®éªŒå“, æœ‰è®¸å¤šæ”¹è¿›çš„ç©ºé—´, æœ‰å…´è¶£çš„åŒå­¦å¯ä»¥å‚ä¸è¿›æ¥, ä¸€èµ·å®Œå–„Box, å…¨éƒ¨éƒ½ç”±PHP ä»£ç å®ç°, è®¤çœŸçœ‹ä¸€ä¸‹å°±å¯ä»¥å‚ä¸è´¡çŒ®äº†","categories":[],"tags":[{"name":"Hyperf","slug":"Hyperf","permalink":"https://assert6.github.io/tags/Hyperf/"},{"name":"Box","slug":"Box","permalink":"https://assert6.github.io/tags/Box/"},{"name":"Windows","slug":"Windows","permalink":"https://assert6.github.io/tags/Windows/"}]},{"title":"ä¸€åˆ†é’Ÿæ­å»ºHyperf","slug":"ä¸€åˆ†é’Ÿæ­å»ºHyperf","date":"2019-07-10T16:00:00.000Z","updated":"2023-09-25T02:53:40.062Z","comments":true,"path":"2019-07-10/ä¸€åˆ†é’Ÿæ­å»ºHyperf/","link":"","permalink":"https://assert6.github.io/2019-07-10/%E4%B8%80%E5%88%86%E9%92%9F%E6%90%AD%E5%BB%BAHyperf/","excerpt":"","text":"å‰ç½®ä¾èµ– Docker Git PHPStorm è®¡æ—¶å¼€å§‹1.ä¸‹è½½Hyperf Docker é•œåƒ1docker pull hyperf/hyperf 2.ä¸‹è½½Hyperf1git clone https://github.com/hyperf/hyperf-skeleton.git 3.ç­‰å¾…ä¸‹è½½å®Œæˆ &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt; 98% 4.é…ç½®PHPStormæ‰“å¼€hyperf-skeleton, å¦‚ä¸‹å›¾æ‰€ç¤ºé…ç½®PHPStorm å¦‚æœServer é€‰é¡¹é‡Œæ— æ³•æ‰¾åˆ°Docker,å¯èƒ½æ˜¯Docker æ²¡æœ‰æš´éœ²å®ˆæŠ¤è¿›ç¨‹ ç‚¹å‡»é…ç½®æ—è¾¹çš„è¿è¡ŒæŒ‰é’®, å¦‚ä¸‹å›¾ç¤ºè¯´æ˜å®¹å™¨å·²ç»æ¬¢å¿«çš„è¿è¡Œèµ·æ¥äº† 5.å®‰è£…Composer ç»„ä»¶è¿›å…¥åˆšæ‰éƒ¨ç½²çš„å®¹å™¨ 1docker exec -it hyperf /bin/bash è¿›å…¥å®¹å™¨åè¿è¡Œ 1cd /home &amp;&amp; composer install è¿™ä¸€æ­¥åˆ°äº†å®‰è£…Hyperf ç»„ä»¶çš„ç•Œé¢, æœ‰éœ€è¦çš„å¯ä»¥é€‰æ‹©å®‰è£…, ä¸éœ€è¦å¯ä»¥å…¨é€‰n å®‰è£…å®Œæˆåè¿è¡Œphp bin/hyperf.php start, ç„¶åæ‰“å¼€æµè§ˆå™¨è¯·æ±‚http://127.0.0.1:9501 å®Œæˆ! 6.æœ€åé…ç½®ä¸­çš„Commandä¿®æ”¹ä¸ºphp /home/bin/hyperf.php start, å°±å¯ä»¥æ„‰å¿«çš„ä¸€é”®é‡å¯äº†","categories":[],"tags":[{"name":"Hyperf","slug":"Hyperf","permalink":"https://assert6.github.io/tags/Hyperf/"},{"name":"æ‰‹æŠŠæ‰‹æ•™ä½ ","slug":"æ‰‹æŠŠæ‰‹æ•™ä½ ","permalink":"https://assert6.github.io/tags/%E6%89%8B%E6%8A%8A%E6%89%8B%E6%95%99%E4%BD%A0/"}]},{"title":"ã€æ‰‹æŠŠæ‰‹æ•™ä½ ã€‘Swoft å¤šåº“è¿æ¥æ± é…ç½®","slug":"swoft/Swoft å¤šåº“è¿æ¥æ± é…ç½®","date":"2018-09-26T16:00:00.000Z","updated":"2023-09-25T02:53:40.058Z","comments":true,"path":"2018-09-26/swoft/Swoft å¤šåº“è¿æ¥æ± é…ç½®/","link":"","permalink":"https://assert6.github.io/2018-09-26/swoft/Swoft%20%E5%A4%9A%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0%E9%85%8D%E7%BD%AE/","excerpt":"","text":"è¿™é‡Œçš„å¤šåº“æ˜¯æŒ‡æ•°æ®ä¸åŒçš„ä¸¤ä¸ªä¸»åº“ å¹¶ä¸æ˜¯æ•°æ®ç›¸åŒçš„ä¸»ä»åº“ å¤šåº“çš„é…ç½®éå¸¸ç®€å•, åªæ¶‰åŠåˆ°é…ç½®æ–‡ä»¶å’Œä¸¤ä¸ªç±»PoolConfig Pool é…ç½®æ–‡ä»¶ç¼–è¾‘é…ç½®æ–‡ä»¶ config/properties/db.phpæ–°å¢æ•°æ®åº“é…ç½® 1234567891011121314&#x27;dev&#x27; =&gt; [ &#x27;master&#x27; =&gt; [ &#x27;name&#x27; =&gt; &#x27;master2&#x27;, &#x27;uri&#x27; =&gt; [ &#x27;192.168.1.135:3306/test?user=tender&amp;password=123456&amp;charset=utf8&#x27;, ], ], &#x27;slave&#x27; =&gt; [ &#x27;name&#x27; =&gt; &#x27;slave3&#x27;, &#x27;uri&#x27; =&gt; [ &#x27;192.168.1.135:3306/test?user=tender&amp;password=123456&amp;charset=utf8&#x27;, ], ],], åŠ å®Œå¦‚ä¸‹ é»˜è®¤çš„masterå’Œslaveåº”ä¸ºdefaultä¸‹çš„é…ç½®, ä¸ºäº†å…¼å®¹å†å²ç‰ˆæœ¬ è¿æ¥æ± é…ç½®ç±»æ–°å»ºapp/Pool/Config/DevPoolConfig.php 1234567891011121314151617181920212223242526&lt;?phpnamespace App\\Pool\\Config;use Swoft\\Bean\\Annotation\\Bean;use Swoft\\Bean\\Annotation\\Value;use Swoft\\Db\\Pool\\Config\\DbPoolProperties;/** * DevPoolConfig * @Bean() */class DevPoolConfig extends DbPoolProperties&#123; /** * @Value(name=&quot;$&#123;config.db.dev.master.name&#125;&quot;) * @var string */ protected $name = &#x27;&#x27;; /** * @Value(name=&quot;$&#123;config.db.dev.master.uri&#125;&quot;) * @var array */ protected $uri = [];&#125; è¿æ¥æ± é…ç½®ç±»åªæ˜¯æŠŠé…ç½®æ–‡ä»¶ç”±æ•°ç»„æ”¹å†™ä¸ºç±», æœ‰å…¶ä»–é…ç½®éœ€è¦å…¨éƒ¨åŠ è¿›å»ã€‚ è¿™é‡Œåªæ”¹äº†name å’Œuri è¿æ¥æ± æ–°å»ºapp/Pool/DevPool.php 12345678910111213141516171819202122&lt;?phpnamespace App\\Pool;use App\\Pool\\Config\\DevPoolConfig;use Swoft\\Bean\\Annotation\\Inject;use Swoft\\Bean\\Annotation\\Pool;use Swoft\\Db\\Pool\\DbPool;/** * DevPool * * @Pool(&quot;dev.master&quot;) */class DevPool extends DbPool&#123; /** * @Inject() * @var DevPoolConfig */ public $poolConfig;&#125; æ›´ç®€å•, æŒ‡å®šè¯¥è¿æ¥æ± ä½¿ç”¨å“ªä¸ªé…ç½®æ³¨æ„ä¸‹@Pool æ³¨è§£è¿æ¥æ± åˆ«å, è¦å¸¦.masteræˆ–è€….salve ä½¿ç”¨è¿æ¥æ± æœ‰ä¸¤ç§æ–¹æ³•ä½¿ç”¨è¿æ¥æ± ç¬¬ä¸€ç§æ˜¯åœ¨å®ä½“ç±»@Entity æ³¨è§£é‡Œé…ç½®instanceå­—æ®µ: 12345678/** * ç”¨æˆ·å®ä½“ * @Entity(instance=&quot;dev.master&quot;) * @Table(name=&quot;user&quot;) */class User extends Model&#123;... è¿™æ ·è°ƒç”¨è¯¥å®ä½“å°±ä¼šèµ°devçš„é…ç½® ç¬¬äºŒç§æ˜¯åœ¨Db::query() æŸ¥è¯¢æ—¶æŒ‡å®šè¿æ¥æ± , ç›´æ¥åœ¨æ–¹æ³•ç¬¬ä¸‰ä¸ªå‚æ•°é…ç½®å³å¯: 1Db::query(&quot;show databases;&quot;,[], &#x27;dev.master&#x27;)-&gt;getResult();","categories":[],"tags":[{"name":"æ‰‹æŠŠæ‰‹æ•™ä½ ","slug":"æ‰‹æŠŠæ‰‹æ•™ä½ ","permalink":"https://assert6.github.io/tags/%E6%89%8B%E6%8A%8A%E6%89%8B%E6%95%99%E4%BD%A0/"},{"name":"Swoft","slug":"Swoft","permalink":"https://assert6.github.io/tags/Swoft/"}]},{"title":"ã€æ‰‹æŠŠæ‰‹æ•™ä½ ã€‘è‡ªå®šä¹‰Swoft æ³¨è§£å’ŒAOP","slug":"swoft/è‡ªå®šä¹‰Swoft æ³¨è§£å’ŒAOP","date":"2018-07-19T16:00:00.000Z","updated":"2023-09-25T02:53:40.058Z","comments":true,"path":"2018-07-19/swoft/è‡ªå®šä¹‰Swoft æ³¨è§£å’ŒAOP/","link":"","permalink":"https://assert6.github.io/2018-07-19/swoft/%E8%87%AA%E5%AE%9A%E4%B9%89Swoft%20%E6%B3%A8%E8%A7%A3%E5%92%8CAOP/","excerpt":"","text":"åºè¨€å‰ä¸¤ç¯‡å…³äºSwoft RPC çš„ä½¿ç”¨æ•™ç¨‹å¾—åˆ°å¾ˆå¤šå°ä¼™ä¼´çš„æ”¯æŒ å¹¶ä¸”åæ˜ ç½‘ä¸Šå¾ˆå¤šå…³äºSwoft çš„è®²è§£å¤ªè¿‡äºæ·±â™‚å…¥, å¾ˆå¤šå°ä¼™ä¼´çœ‹ä¸æ‡‚ è¿™æ˜¯å¾ˆæ­£å¸¸çš„, å› ä¸ºå¼€å‘è€…ä»¬å¯¹äºä½¿ç”¨éš¾åº¦çš„ç†è§£è·Ÿæˆ‘ä»¬æœ‰äº›åå·® èº«ä¸ºå¼€å‘è€…è‡ªç„¶çŸ¥é“å¦‚ä½•ä½¿ç”¨, è®¤ä¸ºä¸éœ€è¦è®²è§£, ä¹Ÿå°±æ˜¯æ‰€è°“çš„çŸ¥è¯†çš„è¯…å’’ æ‰€ä»¥å¾ˆå¤šå…³äºSwoft çš„è®²è§£éƒ½æ˜¯åº•å±‚åŸç† é‚£åœ¨è¿™æˆ‘å°±å¼€ä¸€ä¸ªå¤§ä½¬ä»¬ä¸å±‘çš„æ–°æ‰‹å‘è®²è§£æ•™ç¨‹ (ï¿£_ ï¿£ ) å«åš[æ‰‹æŠŠæ‰‹æ•™ä½ ]ç³»åˆ— åªè¦è·Ÿç€ä¸€ç‚¹ç‚¹ç»ƒä¹ , ç†Ÿç»ƒä½¿ç”¨æ˜¯æ²¡é—®é¢˜æ»´ å‰ç½®æŠ€èƒ½ ä¼šä½¿ç”¨Swoft çš„MVC ä½¿ç”¨äº†Swoft çš„æ³¨è§£ ç†è§£æ³¨è§£åªæ˜¯é…ç½®çš„å¦ä¸€ç§å±•ç°æ–¹å¼ PHPStorm å®‰è£…äº†PHP Annotations æ’ä»¶ ä¸‹é¢å°±è®©æˆ‘ä»¬å¼€å§‹å§ æ³¨è§£ç±»æƒ³è¦å®šä¹‰ä¸€ä¸ªæ³¨è§£æ˜¯éå¸¸ç®€å•çš„ æ–°å»ºæ³¨è§£ç±»app\\Module\\Test\\Annotations\\Test.php 123456789101112131415161718192021222324252627282930313233343536373839&lt;?phpnamespace App\\Module\\Test\\Annotations;/** * æµ‹è¯•æ³¨è§£ * @Annotation * @Target(&quot;ALL&quot;) */class Test&#123; /** * @var string æ„é€ å‚æ•° */ private $name = &#x27;&#x27;; public function __construct(array $values) &#123; if (isset($values[&#x27;name&#x27;])) &#123; $this-&gt;name = $values[&#x27;name&#x27;]; &#125; &#125; /** * @return string */ public function getName(): string &#123; return $this-&gt;name; &#125; /** * @param string $name */ public function setName(string $name) &#123; $this-&gt;name = $name; &#125;&#125; è¿™é‡Œæœ‰ä¸‰ç‚¹éœ€è¦æ³¨æ„: 1 ç±»æ³¨è§£è¦åŠ @Annotation, ç”¨æ¥å£°æ˜è¿™æ˜¯ä¸€ä¸ªæ³¨è§£ç±» 2 ç±»åä¸éœ€è¦åŠ Annotationåç¼€ 3 ç±»æ³¨è§£@Target()ä¸ºDoctrine\\Common\\Annotations\\Annotation\\Target.php, å‚æ•°å¯ä»¥å¡«ALL|CLASS|METHOD|PROPERTY|ANNOTATION, è¡¨ç¤ºè¯¥æ³¨è§£ä½¿ç”¨çš„çº§åˆ«, ç±»æ³¨è§£è¿˜æ˜¯æ–¹æ³•æ³¨è§£,å±æ€§æ³¨è§£,æˆ–è€…å…¨éƒ¨éƒ½èƒ½ä½¿ç”¨ è¿™æ ·æˆ‘ä»¬è‡ªå®šä¹‰çš„æ³¨è§£æ ‡ç­¾å°±å®Œæˆäº† å»IndexController.phpé‡Œè¯•ä¸€ä¸‹ æ³¨æ„ä¸è¦å¿˜è®°useæˆ‘ä»¬çš„æ³¨è§£ç±» æ³¨è§£ç±»Testçš„@Targetè®¾ç½®ä¸ºALL, å¯ä»¥åŒæ—¶åœ¨ç±»å’Œæ–¹æ³•ä¸Šä½¿ç”¨(å±æ€§ä¹Ÿå¯ä»¥çš„) ä¸ºäº†ä½“ç°ä½¿ç”¨äº†æ³¨è§£, å¯ä»¥åœ¨æ³¨è§£ç±»Testçš„æ„é€ å‡½æ•°ä¸­è¿›è¡Œè¾“å‡º é‡å¯ä¸€ä¸‹ç¨‹åº è¿™æ ·å°±æ˜¯æˆåŠŸäº†, è¾“å‡ºå¤šä¸ªæ˜¯æ­£å¸¸ç°è±¡, æ¯•ç«Ÿå¤šè¿›ç¨‹, ä¹Ÿæ˜¯Swofté«˜æ€§èƒ½çš„åŸå›  æ³¨è§£è§£æç±» Parseræ­£å¦‚å‰ç½®æŠ€èƒ½é‡Œæ‰€è¯´ æ³¨è§£åªæ˜¯é…ç½®çš„å¦ä¸€ç§å±•ç°æ–¹å¼ ä»»ä½•é€»è¾‘éƒ½ä¸è¦åœ¨æ³¨è§£ç±»é‡Œå¤„ç† æ–°å»ºæ³¨è§£è§£æç±»app\\Module\\Test\\Parser\\TestParser.php 1234567891011121314151617181920&lt;?phpnamespace App\\Module\\Test\\Parser;use App\\Module\\Test\\Collector\\TestCollector;use Swoft\\Bean\\Parser\\AbstractParser;class TestParser extends AbstractParser&#123; public function parser( string $className, $objectAnnotation = null, string $propertyName = &#x27;&#x27;, string $methodName = &#x27;&#x27;, $propertyValue = null ) &#123; TestCollector::collect($className, $objectAnnotation, $propertyName, $methodName, $propertyValue); &#125;&#125; è§£é‡Šä¸€ä¸‹è¿™å‡ ä¸ªå‚æ•°çš„æ„ä¹‰: $className å½“å‰æ³¨è§£æ‰€åœ¨çš„ç±»å $objectAnnotation å½“å‰æ³¨è§£æ‰€å®ä¾‹åŒ–çš„æ³¨è§£ç±»new Test([name=&quot;666&quot;]) $propertyName å½“å‰æ³¨è§£æ‰€åœ¨çš„å±æ€§å(å¦‚æœæ˜¯å±æ€§æ³¨è§£) $methodName å½“å‰æ³¨è§£æ‰€åœ¨çš„æ–¹æ³•å(å¦‚æœæ˜¯æ–¹æ³•æ³¨è§£) $propertyValue å½“å‰æ³¨è§£æ‰€åœ¨çš„å±æ€§(å¦‚æœæ˜¯å±æ€§æ³¨è§£) è¿™é‡Œä¹Ÿä¸è¦å¤„ç†é€»è¾‘, å› ä¸ºæ­¤åˆ»ç¨‹åºè¿˜å¤„äºåˆå§‹åŒ–é˜¶æ®µ, æ²¡æœ‰è¯·æ±‚æ•°æ® æ³¨è§£è§£æç±»Parseråªåšäº†ä¸€ä»¶äº‹, å°±æ˜¯æŠŠæ³¨è§£ç±»å­˜å…¥æ³¨è§£æ”¶é›†ç±» ä»€ä¹ˆæ˜¯æ³¨è§£æ”¶é›†ç±»å‘¢? æ³¨è§£æ”¶é›†ç±» Collectoræ³¨è§£æ”¶é›†ç±»Collectoréå¸¸ç®€å•, ç›¸å½“äºä¸€ä¸ªå…¨å±€æ•°ç»„æ–¹ä¾¿æˆ‘ä»¬åç»­å¤„ç†è€Œå·² æ–°å»ºæ³¨è§£æ”¶é›†ç±»app\\Module\\Test\\Collector\\TestCollector.php 1234567891011121314151617181920212223242526&lt;?phpnamespace App\\Module\\Test\\Collector;use Swoft\\Bean\\CollectorInterface;class TestCollector implements CollectorInterface&#123; private static $test = []; public static function collect( string $className, $objectAnnotation = null, string $propertyName = &#x27;&#x27;, string $methodName = &#x27;&#x27;, $propertyValue = null ) &#123; self::$test[$className][$methodName] = $objectAnnotation; &#125; public static function getCollector() &#123; return self::$test; &#125;&#125; æ­£å¦‚æ‰€è§, åªæ˜¯å­˜å–$objectAnnotationæ³¨è§£å®ä¾‹, æ–¹ä¾¿æˆ‘ä»¬åé¢ä½¿ç”¨ æœ¬ç¯‡ä¸¾ä¾‹çš„æ˜¯æ–¹æ³•æ³¨è§£, æ‰€ä»¥é»˜è®¤$methodNameä¸ä¸ºç©º æ³¨è§£æ”¶é›†ç±»Collectorè¢«æ³¨è§£è§£æç±»Parserè°ƒç”¨ é‚£æ³¨è§£è§£æç±»Parserè¢«è°è°ƒç”¨å‘¢? æ³¨è§£å°è£…ç±» Wrapperæ–°å»ºæ³¨è§£å°è£…ç±»app\\Module\\Test\\Wrapper\\TestWrapper.php 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556&lt;?phpnamespace App\\Module\\Test\\Wrapper;use App\\Module\\Test\\Annotations\\Test;use Swoft\\Bean\\Wrapper\\AbstractWrapper;class TestWrapper extends AbstractWrapper&#123; /** * @var array è§£æå“ªäº›æ³¨è§£(ç±»çº§) */ protected $classAnnotations = []; /** * @var array è§£æå“ªäº›æ³¨è§£(å±æ€§çº§) */ protected $propertyAnnotations = []; /** * @var array è§£æå“ªäº›æ³¨è§£(æ–¹æ³•çº§) */ protected $methodAnnotations = [ Test::class, ]; /** * æ˜¯å¦è§£æç±»æ³¨è§£ * @param array $annotations * @return bool */ public function isParseClassAnnotations(array $annotations): bool &#123; return false; &#125; /** * æ˜¯å¦è§£æå±æ€§æ³¨è§£ * @param array $annotations * @return bool */ public function isParsePropertyAnnotations(array $annotations): bool &#123; return false; &#125; /** * æ˜¯å¦è§£ææ–¹æ³•æ³¨è§£ * @param array $annotations * @return bool */ public function isParseMethodAnnotations(array $annotations): bool &#123; return true; &#125;&#125; å½“æˆ‘ä»¬çš„ç±»æ³¨è§£è¢«å®ä¾‹åŒ–æ—¶, ä¼šè§¦å‘æ³¨è§£å°è£…ç±»&#123;æ³¨è§£æ ‡ç­¾å&#125;Wrapper æ³¨è§£å°è£…ç±»Wrapperæ¥å†³å®šæ˜¯å¦è§¦å‘æ³¨è§£è§£æç±»Parser è§£é‡Šä¸€ä¸‹, å¯èƒ½ä¸å¥½ç†è§£ è¿™é‡ŒisParseClassAnnotations è¿”å›false, æ„å‘³ç€ç±»æ³¨è§£ç•¥è¿‡ä¸è§£æ; åŒç†isParsePropertyAnnotations è¿”å›false, å±æ€§æ³¨è§£ç•¥è¿‡ä¸è§£æ; è€ŒisParseMethodAnnotations è¿”å›true,é‚£ä¹ˆå¯¹åº”çš„$methodAnnotationsé‡Œçš„æ³¨è§£ç±»å…¨éƒ¨è§¦å‘è§£æ,è¿™é‡Œçš„Test::classä¼šè§¦å‘å¯¹åº”çš„TestParser; æŠ½è±¡çš„è¯´, æ³¨è§£å°è£…ç±»Wrapperå›ç­”äº†ä¸¤ä¸ªé—®é¢˜: æ˜¯å¦è§£æ, è§£æå“ªäº› å…·è±¡çš„è¯´, è¿™é‡Œçš„å°è£…ç±»TestWrapperå›ç­”çš„å°±æ˜¯:â€åªè§£ææ–¹æ³•æ³¨è§£@Testâ€œ å¯ä»¥åœ¨æ³¨è§£è§£æç±»Parserçš„æ„é€ æ–¹æ³•ä¸­è¿›è¡Œè¾“å‡º é‡å¯ç¨‹åº, æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹!è¿™é‡Œå¯ä»¥çœ‹åˆ°, åœ¨æ³¨è§£ç±»Testé‡Œè¾“å‡ºçš„å†…å®¹è¿˜æœ‰ç±»æ³¨è§£çš„666, åˆ°äº†æ³¨è§£è§£æç±»TestParser, å°±æ²¡æœ‰äº†666, åªæœ‰æ–¹æ³•æ³¨è§£777 æ€»ç»“ å®ä¾‹åŒ–æ³¨è§£ç±»Test, è¯¢é—®æ³¨è§£å°è£…ç±»TestWrapperè§£æå“ªäº›æ³¨è§£ æ³¨è§£å°è£…ç±»TestWrapperå›ç­”è§£ææ–¹æ³•ä¸Šçš„Test, äºæ˜¯æ–¹æ³•çº§çš„æ³¨è§£Testè¢«æ³¨è§£è§£æç±»TestParserå­˜è¿›äº†æ³¨è§£æ”¶é›†ç±»TestCollector æ³¨æ„!!!!ç¨‹åºåªä¼šä¸»åŠ¨æ‰«æç±»æ³¨è§£, ç„¶åæ‰«æç±»æ³¨è§£Wrapperä¸‹æŒ‡å®šçš„æ–¹æ³•æ³¨è§£å’Œå±æ€§æ³¨è§£!!å¦‚æœä½ çš„æ–¹æ³•æ³¨è§£ä¸å­˜åœ¨äºä»»ä½•ç±»æ³¨è§£çš„Wrapperä¸‹, åˆ™æ˜¯ä¸ä¼šè¢«è§£æçš„!!å¦‚ä½•ä½¿ç”¨æ”¶é›†å®Œæ¯•ä¸‹é¢ä¸¾ä¾‹å¦‚ä½•ä½¿ç”¨ ä¸­é—´ä»¶æ–°å»ºä¸­é—´ä»¶app\\Module\\Test\\Middlewares\\TestMiddleware.php 12345678910111213141516171819202122232425262728293031323334353637&lt;?phpnamespace App\\Module\\Test\\Middlewares;use App\\Module\\Test\\Annotations\\Test;use App\\Module\\Test\\Collector\\TestCollector;use Psr\\Http\\Message\\ResponseInterface;use Psr\\Http\\Message\\ServerRequestInterface;use Psr\\Http\\Server\\RequestHandlerInterface;use Swoft\\Bean\\Annotation\\Bean;use Swoft\\Core\\RequestContext;use Swoft\\Http\\Message\\Middleware\\MiddlewareInterface;/** * @Bean() */class TestMiddleware implements MiddlewareInterface&#123; public function process(ServerRequestInterface $request, RequestHandlerInterface $handler): ResponseInterface &#123; echo &quot;in Middleware\\n&quot;; $response = $handler-&gt;handle($request); // å½“å‰è¯·æ±‚çš„æ§åˆ¶å™¨ $controllerClass = RequestContext::getContextDataByKey(&#x27;controllerClass&#x27;); // å½“å‰è¯·æ±‚çš„æ–¹æ³• $controllerAction = RequestContext::getContextDataByKey(&#x27;controllerAction&#x27;); $collector = TestCollector::getCollector(); /* @var Test $test*/ if ($test = $collector[$controllerClass][$controllerAction])&#123; print_r($test-&gt;getName().&quot; in Middleware\\n&quot;); &#125; return $response; &#125;&#125; è¿™é‡Œå¯ä»¥çœ‹åˆ°, ä¹‹å‰è´Ÿè´£æ”¶é›†æ³¨è§£çš„æ³¨è§£æ”¶é›†ç±»TestCollector æ´¾ä¸Šç”¨å¤„äº†, å¯ä»¥éå¸¸æ–¹ä¾¿çš„é€šè¿‡ä»–è·å–åˆ°å½“å‰è¯·æ±‚æ–¹æ³•çš„æ³¨è§£ä¿¡æ¯ è¿™éœ€è¦æ³¨æ„, RequestContext::getContextDataByKey(&#39;controllerClass&#39;)è·å–è¯·æ±‚æ§åˆ¶å™¨çš„æ–¹æ³•è¦åœ¨$handler-&gt;handle($request)åæ‰æœ‰å€¼, å› ä¸ºè´Ÿè´£è·¯ç”±çš„ä¸­é—´ä»¶è¿˜æ²¡æ‰§è¡Œåˆ°XD åˆ‡å‹¿å¿˜è®°use ä¸­é—´ä»¶ é‡å¯å®Œè®¿é—®ä¸€ä¸‹è¯•è¯• AOP åˆ‡é¢æ–°å»ºåˆ‡é¢ç±»app\\Module\\Test\\Aspect\\TestAspect.php 123456789101112131415161718192021222324252627282930313233343536373839404142434445&lt;?phpnamespace App\\Module\\Test\\Aspect;use App\\Module\\Test\\Collector\\TestCollector;use Swoft\\Aop\\ProceedingJoinPoint;use Swoft\\Bean\\Annotation\\Around;use Swoft\\Bean\\Annotation\\Aspect;use Swoft\\Bean\\Annotation\\PointAnnotation;use App\\Module\\Test\\Annotations\\Test;use Swoft\\Core\\RequestContext;/** * æµ‹è¯•åˆ‡é¢ç±» * @Aspect() * @PointAnnotation( * include=&#123; * Test::class * &#125; * ) * @package App\\Module\\Test\\Aspect */class TestAspect&#123; /** * @Around() * @param ProceedingJoinPoint $proceedingJoinPoint * @return mixed */ public function around(ProceedingJoinPoint $proceedingJoinPoint) &#123; $controllerClass = RequestContext::getContextDataByKey(&#x27;controllerClass&#x27;); $controllerAction = RequestContext::getContextDataByKey(&#x27;controllerAction&#x27;); $collector = TestCollector::getCollector(); /* @var Test $test*/ $test = $collector[$controllerClass][$controllerAction]; echo $test-&gt;getName(), &quot;around-before\\n&quot;; $result = $proceedingJoinPoint-&gt;proceed(); echo $test-&gt;getName(), &quot;around-after\\n&quot;; return $result; &#125;&#125; @Aspect() å£°æ˜è¿™æ˜¯ä¸€ä¸ªåˆ‡é¢ç±» @PointAnnotation è®¾ç½®äº†æ³¨è§£åˆ‡å…¥ç‚¹ @Before() è®¾ç½®äº†é€šçŸ¥ç‚¹ å…¶ä»–è®¾ç½®å¯ä»¥å‚è€ƒSwoftæ–‡æ¡£ AOPç« èŠ‚; è¿˜éœ€è¦æ”¹ä¸€ä¸‹æ³¨è§£è§£æç±»TestParser åœ¨parser æ–¹æ³•ä¸­åŠ å…¥Collector::$methodAnnotations[$className][$methodName][] = get_class($objectAnnotation); è¿™ä¸€æ­¥çš„ä½œç”¨æ˜¯å°†ä½¿ç”¨æ³¨è§£çš„æ–¹æ³•åŠ å…¥åˆ°å…è®¸åˆ‡å…¥çš„æ•°ç»„, åªæœ‰åœ¨Collector::$methodAnnotationså˜é‡ä¸­å­˜åœ¨çš„æ–¹æ³•æ‰ä¼šè°ƒç”¨åˆ‡é¢ é‡å¯ç¨‹åºè¯·æ±‚ä¸€ä¸‹ æ§åˆ¶å™¨å½“ç„¶ä¹Ÿå¯ä»¥åœ¨æ§åˆ¶å™¨ç”¨ ä¸ªäººè¿˜æ˜¯æ¨èç”¨åˆ‡é¢, æ§åˆ¶å™¨é‡Œåªéœ€è¦åŠ å…¥æ³¨è§£å³å¯","categories":[],"tags":[{"name":"æ‰‹æŠŠæ‰‹æ•™ä½ ","slug":"æ‰‹æŠŠæ‰‹æ•™ä½ ","permalink":"https://assert6.github.io/tags/%E6%89%8B%E6%8A%8A%E6%89%8B%E6%95%99%E4%BD%A0/"},{"name":"Swoft","slug":"Swoft","permalink":"https://assert6.github.io/tags/Swoft/"}]},{"title":"è®°ä¸€æ¬¡XSSæ¼æ´(æ…•è¯¾ç½‘)","slug":"security/è®°ä¸€æ¬¡XSSæ¼æ´(æ…•è¯¾ç½‘)","date":"2018-06-28T16:00:00.000Z","updated":"2023-09-25T02:53:40.054Z","comments":true,"path":"2018-06-28/security/è®°ä¸€æ¬¡XSSæ¼æ´(æ…•è¯¾ç½‘)/","link":"","permalink":"https://assert6.github.io/2018-06-28/security/%E8%AE%B0%E4%B8%80%E6%AC%A1XSS%E6%BC%8F%E6%B4%9E(%E6%85%95%E8%AF%BE%E7%BD%91)/","excerpt":"","text":"é¦–å…ˆéšä¾¿æ³¨å†Œä¸ªè´¦å·è¿›å…¥åˆ°æ‰‹è®°æ ç›®, ä¹Ÿå°±æ˜¯æ–‡ç« åŒº ç‚¹å‡»å³ä¾§çš„å†™æ–‡ç«  ç‚¹å‡»æ’å…¥å›¾ç‰‡ å…³é”®æ¥äº†: å›¾ç‰‡æè¿°è¿™é‡Œ, æ˜¯ç›´æ¥å†™å…¥imgæ ‡ç­¾çš„titleå­—æ®µçš„! è¿™é‡Œæˆ‘ä»¬å¯ä»¥å°è¯•æ‹¼æ¥onloadæ¥è§¦å‘js è€Œä¸”æœ€æœ€å‚»é€¼çš„ä¸€ç‚¹, SESSIONID ä¸æ˜¯httpOnly, æ„å‘³ç€æˆ‘ä»¬å¯ä»¥é€šè¿‡js è„šæœ¬è¯»å–åˆ°SESSIONID éšä¾¿å‘å¸ƒä¸€ç¯‡æ–‡ç« , ç­‰å¾…ç®¡ç†å‘˜å®¡æ ¸ æˆåŠŸæ‹¿åˆ°ç®¡ç†å‘˜è´¦å· æ›´ä¸ºè®½åˆºçš„æ˜¯, è¯¥åç®¡ç†å‘˜è¿˜åœ¨çœ‹XSS å®‰å…¨è§†é¢‘â€¦ 2018å¹´7æœˆ2æ—¥æ›´æ–°ä¸ç”¨å°è¯•äº†, å·²ç»åé¦ˆç»™å®˜æ–¹, å·²ä¿®å¤","categories":[],"tags":[{"name":"XSS","slug":"XSS","permalink":"https://assert6.github.io/tags/XSS/"},{"name":"å®‰å…¨","slug":"å®‰å…¨","permalink":"https://assert6.github.io/tags/%E5%AE%89%E5%85%A8/"}]},{"title":"ã€æ‰‹æŠŠæ‰‹æ•™ä½ ã€‘ä½¿ç”¨TCP Client è°ƒç”¨Swoft RPC æœåŠ¡","slug":"swoft/ä½¿ç”¨TCP Client è°ƒç”¨Swoft RPC æœåŠ¡","date":"2018-06-07T16:00:00.000Z","updated":"2023-09-25T02:53:40.058Z","comments":true,"path":"2018-06-07/swoft/ä½¿ç”¨TCP Client è°ƒç”¨Swoft RPC æœåŠ¡/","link":"","permalink":"https://assert6.github.io/2018-06-07/swoft/%E4%BD%BF%E7%94%A8TCP%20Client%20%E8%B0%83%E7%94%A8Swoft%20RPC%20%E6%9C%8D%E5%8A%A1/","excerpt":"","text":"å‰ä¸¤ç¯‡æ•™å¤§å®¶å¦‚ä½•æ­å»ºå’Œä½¿ç”¨Swoft RPC æœåŠ¡, è¿™é‡Œç®€å•è¯´ä¸€ä¸‹ç”¨å…¶ä»–TCP å®¢æˆ·ç«¯å¦‚ä½•è°ƒç”¨Swoft çš„RPC æœåŠ¡ è¿™é‡Œç”¨swoole_client ä¸¾ä¸ªä¾‹å­ 123456789101112131415161718$client = new \\swoole_client(SWOOLE_SOCK_TCP);if (! $client-&gt;connect(&#x27;192.168.1.214&#x27;, 8099, 0.5))&#123; return &quot;connect failed. Error: &#123;$client-&gt;errCode&#125;\\n&quot;;&#125;$client-&gt;send(json_encode([ &quot;interface&quot; =&gt; &quot;App\\Lib\\MemberInterface&quot;, &quot;version&quot; =&gt; &quot;0&quot;, &quot;method&quot; =&gt; &quot;getMemberByID&quot;, &quot;params&quot; =&gt; [$mid],]).&quot;\\r\\n&quot;);// æ—§ç‰ˆä¸éœ€è¦è¿½åŠ \\r\\n$result = $client-&gt;recv();$client-&gt;close();return $result; éå¸¸çš„ç®€å•æ˜“ç”¨, ä½†æ˜¯éœ€è¦æ³¨æ„ä¸€ç‚¹: interface å‚æ•°æ˜¯æœåŠ¡ç«¯å¸¦å‘½åç©ºé—´çš„ç±»å, è·Ÿå®¢æˆ·ç«¯æ²¡ä»»ä½•å…³ç³», å®Œå…¨å–å†³äºæœåŠ¡ç«¯æŠŠRPC æ¥å£ç±»æ”¾åœ¨å“ªå„¿â€¦","categories":[],"tags":[{"name":"æ‰‹æŠŠæ‰‹æ•™ä½ ","slug":"æ‰‹æŠŠæ‰‹æ•™ä½ ","permalink":"https://assert6.github.io/tags/%E6%89%8B%E6%8A%8A%E6%89%8B%E6%95%99%E4%BD%A0/"},{"name":"Swoft","slug":"Swoft","permalink":"https://assert6.github.io/tags/Swoft/"}]},{"title":"ã€æ‰‹æŠŠæ‰‹æ•™ä½ ã€‘ç”¨Swoft æ­å»ºå¾®æœåŠ¡(TCP RPC)2","slug":"swoft/ç”¨Swoft æ­å»ºå¾®æœåŠ¡(TCP RPC)2","date":"2018-06-06T16:00:00.000Z","updated":"2023-09-25T02:53:40.058Z","comments":true,"path":"2018-06-06/swoft/ç”¨Swoft æ­å»ºå¾®æœåŠ¡(TCP RPC)2/","link":"","permalink":"https://assert6.github.io/2018-06-06/swoft/%E7%94%A8Swoft%20%E6%90%AD%E5%BB%BA%E5%BE%AE%E6%9C%8D%E5%8A%A1(TCP%20RPC)2/","excerpt":"","text":"ä¸Šä¸€ç¯‡è®²äº†å¦‚ä½•ç”¨Swoft æ­å»ºRPC æœåŠ¡ æœ¬ç¯‡ä»‹ç»å¦‚ä½•ä½¿ç”¨å¾®æœåŠ¡ å¾®æœåŠ¡æµç¨‹é¦–å…ˆè®²ä¸€ä¸‹å¾®æœåŠ¡çš„æµç¨‹ å¼„æ¸…æ¥šæµç¨‹, å¼€å‘èµ·æ¥å°±è¡Œäº‘æµæ°´ è¿™æ˜¯å®˜æ–¹ç»™å‡ºçš„ç›®å½•ç»“æ„ 1234app/ - Lib/ // æœåŠ¡çš„å…¬å…±æ¥å£å®šä¹‰ç›®å½•ï¼Œé‡Œé¢é€šå¸¸åªæœ‰phpæ¥å£ç±» - Pool/ // æœåŠ¡æ± é…ç½®ï¼Œé‡Œé¢å¯ä»¥é…ç½®ä¸åŒæœåŠ¡çš„è¿æ¥æ± ï¼Œå‚è€ƒé‡Œé¢çš„ UserServicePool - Services/ // å…·ä½“çš„æœåŠ¡æ¥å£å®ç°ç±»ï¼Œé‡Œé¢çš„ç±»é€šå¸¸å®ç°äº† Lib ä¸­å®šä¹‰çš„æ¥å£ å½“ç„¶åœ¨å¤šä¸ªæœåŠ¡ä¸­ä½¿ç”¨æ—¶ï¼Œ è¦å°†libåº“ app&#x2F;Libç§»åˆ°ä¸€ä¸ªå…¬å…±çš„gitä»“åº“é‡Œï¼Œç„¶åå„ä¸ªæœåŠ¡é€šè¿‡ composer æ¥è·å–ä½¿ç”¨ è¿™é‡Œæœ‰3ä¸ªç›®å½• Lib æ˜¯æ¥å£, ä¹Ÿæ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å¿…é¡»çš„, ç”¨æ¥è§„å®šæ•°æ®ç»“æ„, ä¸€èˆ¬ç”±æœåŠ¡ç«¯æä¾› æœåŠ¡ç«¯è¿˜éœ€è¦å®ç°Services, ä¹Ÿå°±æ˜¯ç›¸å½“äºModel å±‚ å®¢æˆ·ç«¯å¯ä»¥é€šè¿‡é…ç½®Pool æ¥è°ƒç”¨å¯¹åº”çš„Services, å¦‚åŒè°ƒç”¨è‡ªèº«çš„Model ä¸€æ ·æ–¹ä¾¿ æ•´ä¸ªæµç¨‹ä¸æ˜¯å¾ˆéš¾ç†è§£, ä½†æ˜¯å®˜æ–¹æŠŠä¸‰ä¸ªç›®å½•æ”¾åœ¨ä¸€èµ·, å¹¶ä¸”æ²¡æœ‰è¯¦ç»†è¯´æ˜, å¯¼è‡´å¾ˆå¤šåŒå­¦æä¸æ¸…æ¥š ä¸‹é¢æˆ‘ä»¬æ¥å†™ä¸€ä¸ªä¾‹å­è¯•ä¸€ä¸‹å§ å®šä¹‰ä¸€ä¸ªæ¥å£ æ¥å£å®šä¹‰å’Œæ™®é€šæ¥å£å®Œå…¨ä¸€è‡´ï¼Œå”¯ä¸€ä¸ä¸€æ ·çš„æ˜¯: éœ€è¦åœ¨ç±»æ³¨é‡Šä¸Šå®šä¹‰ç±»ä¼¼ deferGetUser æ–¹æ³•ï¼Œå¯¹åº”ç±»é‡Œé¢æ–¹æ³• getUser ä¸”é¦–å­—æ¯å¤§å†™ã€‚è¿™ç§ defer* æ–¹æ³•ï¼Œä¸€èˆ¬ç”¨äºä¸šåŠ¡å»¶è¿Ÿæ”¶åŒ…å’Œå¹¶å‘ä½¿ç”¨ã€‚ è¿™äº›æ–¹æ³•æ˜¯ä¸éœ€è¦å®ç°çš„ï¼Œä»…ç”¨äºæä¾›IDEæç¤ºã€‚å†…éƒ¨è°ƒç”¨é€»è¾‘ç”±æ¡†æ¶å¸®ä½ å®Œæˆ åœ¨app/Lib æ–°å»ºæ¥å£æ–‡ä»¶MemberInterface å®šä¹‰ä¸€ä¸ªgetMemberByIDæ–¹æ³•, å¹¶ä¸”æ ¹æ®å®˜æ–¹æç¤º, åœ¨æ¥å£æ³¨é‡Šé‡Œå®šä¹‰ä¸€ä¸ªdeferGetMemberByID æ–¹æ³• 12345678910111213&lt;?phpnamespace App\\Lib;use Swoft\\Core\\ResultInterface;/** * @method ResultInterface deferGetMemberByID(int $id) */interface MemberInterface&#123; public function getMemberByID(int $id);&#125; è¿™æ ·å°±å¯ä»¥äº†, æ–°å»ºçš„æ¯ä¸ªæ–¹æ³•éƒ½è¦åœ¨æ¥å£æ³¨é‡Šé‡ŒåŠ ä¸€ä¸ªåŒåçš„defer*æ–¹æ³•, ç”¨æ¥åšå»¶è¿Ÿæ”¶åŒ…æ–¹æ³• æŠŠæ¥å£æ–‡ä»¶å¤åˆ¶åˆ°swoft-httpçš„app/Libé‡Œ, ä¸”ä¹‹åæ¥å£æ–‡ä»¶è‹¥æœ‰å˜åŠ¨, éƒ½è¦æŠ¥è¯ç›¸åŒ æœåŠ¡ç«¯å®ç°Servicesæ¥å£å®šä¹‰å¥½äº†, ä¸‹é¢æˆ‘ä»¬åœ¨Services é‡Œå®ç°è¿™ä¸ªæ¥å£ åœ¨app/Services æ–°å»ºç±»æ–‡ä»¶MemberService, å®ç°MemberInterface æ¥å£, å¹¶ç»§æ‰¿å…¶æ³¨é‡Š 1234567891011121314151617181920212223242526&lt;?phpnamespace App\\Services;use App\\Lib\\MemberInterface;use Swoft\\Core\\ResultInterface;/** * @method ResultInterface deferGetMemberByID(int $id) * @Service() */class MemberService implements MemberInterface&#123; public function getMemberByID(int $id) &#123; // TODO: Implement getMemberByID() method. return [ &quot;å°çº¢&quot;, &quot;å°çº¢1&quot;, &quot;å°çº¢2&quot;, &quot;å°çº¢3&quot;, &quot;å°çº¢4&quot;, ][$id] ?? &quot;æŸ¥æ— æ­¤äºº&quot;; &#125;&#125; è¿™é‡Œéœ€è¦æ³¨æ„: æ³¨è§£é‡Œçš„@Service()é»˜è®¤ä¸º0, ç”¨æ¥åŒºåˆ†æ¥å£çš„ä¸åŒç‰ˆæœ¬ ä¹Ÿå°±æ˜¯ä½ å¯ä»¥å»ºå¤šä¸ªç±»æ¥å®ç°è¿™ä¸ªæ¥å£, @Service(version=&quot;1.0.1&quot;) ç‰ˆæœ¬å·ä¸åŒå³å¯ å®¢æˆ·ç«¯é…ç½®PoolæœåŠ¡ç«¯çš„Serviceå®ç°å°±æ˜¯è¿™ä¹ˆç®€å• åå€’æ˜¯å®¢æˆ·ç«¯çš„è¿æ¥æ± å®ç°æœ‰äº›éº»çƒ¦ å®¢æˆ·ç«¯è¿æ¥æ± éœ€è¦ææ¸…ä¸¤ä¸ªé—®é¢˜: è¿è°? è¿ä»€ä¹ˆ? app/Pool/Config æ˜¯è¿æ¥æ± é…ç½®æ–‡ä»¶, æ¥è§£å†³ç¬¬ä¸€ä¸ªé—®é¢˜ åŒä¸€ä¸ªè¿æ¥æˆ‘ä»¬å¯ä»¥ç”¨åŒä¸€ä¸ªè¿æ¥æ± , åˆšæ‰åœ¨æœåŠ¡ç«¯åªæ˜¯æ–°å¢äº†ä¸€ä¸ªæ¥å£, å¹¶ä¸æ˜¯æ–°å»ºäº†ä¸€ä¸ªRPC æœåŠ¡, æ‰€ä»¥è¿™é‡Œä¸éœ€è¦æ”¹åŠ¨(åªæ˜¯æˆ‘æ‡’) ä¸‹é¢æ¥è§£å†³ç¬¬äºŒä¸ªé—®é¢˜, è¿ä»€ä¹ˆ? åœ¨app/Controller é‡Œæ–°å»ºä¸€ä¸ªæ§åˆ¶å™¨MemberController 12345678910111213141516171819202122232425262728293031&lt;?phpnamespace App\\Controllers;use App\\Lib\\MemberInterface;use Swoft\\Http\\Server\\Bean\\Annotation\\Controller;use Swoft\\Http\\Server\\Bean\\Annotation\\RequestMapping;use Swoft\\Http\\Server\\Bean\\Annotation\\RequestMethod;use Swoft\\Rpc\\Client\\Bean\\Annotation\\Reference;/** * @Controller() */class MemberController&#123; /** * @Reference(name=&quot;user&quot;, version=&quot;0&quot;) * @var MemberInterface */ private $memberService; /** * @RequestMapping(route=&quot;/member/&#123;mid&#125;&quot;, method=&#123;RequestMethod::GET&#125;) * @return array */ public function getMemberByID(int $mid) &#123; $result = $this-&gt;memberService-&gt;getMemberByID($mid); return [$result]; &#125;&#125; æ³¨æ„æˆå‘˜memberService çš„æ³¨è§£ @Reference(name=&quot;user&quot;) ç”¨æ¥æŒ‡å®šè¿æ¥è°, user æ˜¯åˆ«å, åœ¨app/Lib/UserServicePool.php çš„@Poolæ³¨è§£é‡Œå‘½å @var MemberInterface ç”¨æ¥æŒ‡å®šè¿æ¥ä»€ä¹ˆ, ä¹Ÿå°±æ˜¯å“ªä¸ªæ¥å£ version=&quot;0&quot; ç”¨æ¥æŒ‡å®šè¯¥æ¥å£çš„æŸä¸ªç‰ˆæœ¬, åœ¨æœåŠ¡ç«¯Services çš„æ³¨è§£é‡Œå£°æ˜ æµ‹è¯•æ‰“å¼€è¿æ¥http://127.0.0.1:9501/member/2æˆåŠŸ!","categories":[],"tags":[{"name":"æ‰‹æŠŠæ‰‹æ•™ä½ ","slug":"æ‰‹æŠŠæ‰‹æ•™ä½ ","permalink":"https://assert6.github.io/tags/%E6%89%8B%E6%8A%8A%E6%89%8B%E6%95%99%E4%BD%A0/"},{"name":"Swoft","slug":"Swoft","permalink":"https://assert6.github.io/tags/Swoft/"}]},{"title":"ã€æ‰‹æŠŠæ‰‹æ•™ä½ ã€‘ç”¨Swoft æ­å»ºå¾®æœåŠ¡(TCP RPC)","slug":"swoft/ç”¨Swoft æ­å»ºå¾®æœåŠ¡(TCP RPC)","date":"2018-06-05T16:00:00.000Z","updated":"2023-09-25T02:53:40.058Z","comments":true,"path":"2018-06-05/swoft/ç”¨Swoft æ­å»ºå¾®æœåŠ¡(TCP RPC)/","link":"","permalink":"https://assert6.github.io/2018-06-05/swoft/%E7%94%A8Swoft%20%E6%90%AD%E5%BB%BA%E5%BE%AE%E6%9C%8D%E5%8A%A1(TCP%20RPC)/","excerpt":"","text":"Swoft æ˜¯ä»€ä¹ˆ? Swoft æ¡†æ¶æ˜¯é¦–ä¸ªåŸºäºSwoole åŸç”Ÿåç¨‹çš„æ–°æ—¶ä»£ PHPé«˜æ€§èƒ½åç¨‹å…¨æ ˆæ¡†æ¶ï¼Œå†…ç½®åç¨‹ç½‘ç»œæœåŠ¡å™¨åŠå¸¸ç”¨çš„åç¨‹å®¢æˆ·ç«¯ï¼Œå¸¸é©»å†…å­˜ï¼Œä¸ä¾èµ–ä¼ ç»Ÿçš„ PHP-FPM å…¨å¼‚æ­¥éé˜»å¡ IO å®ç°ï¼Œä»¥ç±»ä¼¼äºåŒæ­¥å®¢æˆ·ç«¯çš„å†™æ³•å®ç°å¼‚æ­¥å®¢æˆ·ç«¯çš„ä½¿ç”¨ï¼Œæ²¡æœ‰å¤æ‚çš„å¼‚æ­¥å›è°ƒï¼Œæ²¡æœ‰ç¹ççš„ yieldï¼Œæœ‰ç±»ä¼¼ Go è¯­è¨€çš„åç¨‹ï¼Œçµæ´»çš„æ³¨è§£ å¼ºå¤§çš„å…¨å±€ä¾èµ–æ³¨å…¥å®¹å™¨ã€å®Œå–„çš„æœåŠ¡æ²»ç†ã€çµæ´»å¼ºå¤§çš„ AOPã€æ ‡å‡†çš„ PSR è§„èŒƒå®ç°ç­‰ ä¸Šé¢æ˜¯å®˜ç½‘æè¿°, æ„Ÿè§‰å¤ªå®˜æ–¹, æˆ‘æ€»ç»“ä¸€ä¸‹: å¸¸é©»å†…å­˜ åç¨‹ å­¦ä¹ æ›²çº¿å¹³æ»‘ å›½å†…æ¡†æ¶ å¼€ç®±å³ç”¨çš„RPC å¦‚ä½•æ­å»ºå¾®æœåŠ¡?é¦–å…ˆç¡®ä¿å·²ç»å¯ä»¥æ­£ç¡®æ­å»ºSwoft, ä¸æ¸…æ¥šçš„å¯ä»¥æŸ¥çœ‹Swoft å®˜æ–¹æ–‡æ¡£ é‰´äºæ¯ä¸ªäººçš„å¼€å‘ç¯å¢ƒéƒ½ä¸åŒ, è¿™é‡Œé€‰ç”¨å®˜æ–¹Docker ä½œä¸ºå¼€å‘ç¯å¢ƒ Dockerä¸‹è½½åœ°å€&gt;&gt;&gt; æ‹‰Docker é•œåƒ1docker pull swoft/swoft éå¸¸çš„ç®€å•è¿™æ ·å°±æ˜¯æˆåŠŸäº† ä¸ºäº†æ–¹ä¾¿ç†è§£ æˆ‘ä»¬æŠŠswoft å¤åˆ¶ä¸¤ä»½ å‘½åä¸ºswoft-rpcå’Œswoft-http swoft-rpcåªå¼€å¯TCP æœåŠ¡swoft-httpåªå¼€å¯HTTP æœåŠ¡ ä¿®æ”¹é…ç½®æ–‡ä»¶æŠŠæ ¹ç›®å½•çš„.env.exampleå¤åˆ¶ä¸€ä»½ä¸º.env .env æ–‡ä»¶ä¸ºswoft é…ç½®æ–‡ä»¶, æœ€é«˜ä¼˜å…ˆçº§(è¦†ç›–config ä¸‹é…ç½®) HTTP ç”¨åˆ°çš„é…ç½® 1234567891011121314151617181920212223242526# ServerPFILE=/tmp/swoft.pidPNAME=php-swoftTCPABLE=false //æ˜¯å¦åŒæ—¶å¯åŠ¨TCP æœåŠ¡å™¨,è¿™é‡Œç”¨ä¸åˆ°æ”¹ä¸ºfalseCRONABLE=falseAUTO_RELOAD=trueAUTO_REGISTER=false...# HTTPHTTP_HOST=0.0.0.0 //ç›‘å¬çš„ç½‘å¡HTTP_PORT=80 //ç›‘å¬çš„ç«¯å£HTTP_MODE=SWOOLE_PROCESS //ä¸ç”¨ç®¡HTTP_TYPE=SWOOLE_SOCK_TCP //ä¸ç”¨ç®¡...//mysql å’Œredis ç•¥è¿‡# User service (demo service)USER_POOL_NAME=user //åˆ«åUSER_POOL_URI=192.168.1.214:8099,192.168.1.214:8099 //è´Ÿè½½å‡è¡¡,URIå¡«å†™ä¸ºRPC çš„åœ°å€,æ³¨æ„Dockerå’Œå®¿ä¸»ä¹‹é—´çš„å…³ç³»USER_POOL_MIN_ACTIVE=5 //ä¸‹é¢éƒ½ä¸ç”¨ç®¡USER_POOL_MAX_ACTIVE=10USER_POOL_MAX_WAIT=20USER_POOL_TIMEOUT=200USER_POOL_MAX_WAIT_TIME=3USER_POOL_MAX_IDLE_TIME=60USER_POOL_USE_PROVIDER=falseUSER_POOL_BALANCER=randomUSER_POOL_PROVIDER=consul RPC ç”¨åˆ°çš„é…ç½® 1234567# TCPTCP_HOST=0.0.0.0 //ç›‘å¬çš„ç½‘å¡TCP_PORT=8099 //ç›‘å¬çš„ç«¯å£TCP_MODE=SWOOLE_PROCESS //ä¸ç”¨ç®¡TCP_TYPE=SWOOLE_SOCK_TCP //ä¸ç”¨ç®¡TCP_PACKAGE_MAX_LENGTH=2048 //æœ€å¤§é“¾æ¥æ•°TCP_OPEN_EOF_CHECK=false //ä¸ç”¨ç®¡ å¯åŠ¨Docker å®¹å™¨1docker run -it --rm -p 8099:8099 -v E:\\WWW\\swoft-rpc:/var/www/swoft swoft/swoft /bin/bash è¿™é‡Œç”¨-itå’Œ-væ–¹ä¾¿è°ƒè¯•è¿™æ ·å°±æ˜¯æˆåŠŸå¯åŠ¨äº† å¯åŠ¨RPC æœåŠ¡1php bin/swoft rpc:start RPC æœåŠ¡åªéœ€è¦å•ç‹¬å¯åŠ¨TCP æœåŠ¡å™¨ æœ‰çš„åŒå­¦RPC å’ŒTCP çš„å…³ç³»å¯èƒ½è¿˜æ²¡å¼„æ¸…æ¥š è¿™é‡ŒRPC æœåŠ¡å’ŒTCP æœåŠ¡å™¨å¯ä»¥ç±»æ¯”ä¸ºWeb æœåŠ¡å’ŒHTTP æœåŠ¡å™¨ ç›‘å¬HTTP æ¥å®ç°Web æœåŠ¡ç›‘å¬TCP æ¥å®ç°RPC æœåŠ¡ å°±è¿™æ ·ç†è§£å§è¿™æ ·å°±æ˜¯æˆåŠŸå¯åŠ¨äº† å¯åŠ¨WebæœåŠ¡ä¹Ÿå°±æ˜¯å¯åŠ¨HTTP æœåŠ¡å™¨XD æ–°å¼€ä¸€ä¸ªç»ˆç«¯æ¥åˆ›å»ºæ–°å®¹å™¨ 1docker run -it --rm -p 9501:80 -v E:\\WWW\\swoft-http:/var/www/swoft swoft/swoft /bin/bash è¿™é‡Œç«¯å£æ”¹æˆ9501, å› ä¸ºæœ¬åœ°å¼€å‘ç¯å¢ƒå·²ç»ç”¨äº†80äº†:b 1php bin/swoft server:start å› ä¸ºåœ¨ä¹‹å‰æŠŠè‡ªåŠ¨å¼€å¯TCP æœåŠ¡å™¨ç¦ç”¨äº† æ‰€ä»¥æ˜¾ç¤ºDisabled è¿™æ ·ä¹Ÿå°±æ˜¯æˆåŠŸäº†! è®¿é—®ä¸€ä¸‹http://127.0.0.1:9501/çœ‹ä¸‹æœ‰æ²¡æœ‰é—®é¢˜ æ²¡é—®é¢˜çš„è¯, å¯ä»¥çœ‹ä¸‹å®˜æ–¹æä¾›çš„RPC demo http://127.0.0.1:9501/rpc/call å¤§åŠŸå‘Šæˆ! æ˜¯ä¸æ˜¯å¾ˆç®€å•! è¿™é‡Œåªæ•™å¤§å®¶å¦‚ä½•æ­å»º, ä¸‹ä¸€ç¯‡æ¥ç†è§£å¦‚ä½•ä½¿ç”¨RPC","categories":[],"tags":[{"name":"æ‰‹æŠŠæ‰‹æ•™ä½ ","slug":"æ‰‹æŠŠæ‰‹æ•™ä½ ","permalink":"https://assert6.github.io/tags/%E6%89%8B%E6%8A%8A%E6%89%8B%E6%95%99%E4%BD%A0/"},{"name":"Swoft","slug":"Swoft","permalink":"https://assert6.github.io/tags/Swoft/"}]}],"categories":[],"tags":[{"name":"Hyperf","slug":"Hyperf","permalink":"https://assert6.github.io/tags/Hyperf/"},{"name":"å…¥é—¨åˆ°ç²¾é€š","slug":"å…¥é—¨åˆ°ç²¾é€š","permalink":"https://assert6.github.io/tags/%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A/"},{"name":"ChatGPT","slug":"ChatGPT","permalink":"https://assert6.github.io/tags/ChatGPT/"},{"name":"OpenAI","slug":"OpenAI","permalink":"https://assert6.github.io/tags/OpenAI/"},{"name":"Box","slug":"Box","permalink":"https://assert6.github.io/tags/Box/"},{"name":"Windows","slug":"Windows","permalink":"https://assert6.github.io/tags/Windows/"},{"name":"æ‰‹æŠŠæ‰‹æ•™ä½ ","slug":"æ‰‹æŠŠæ‰‹æ•™ä½ ","permalink":"https://assert6.github.io/tags/%E6%89%8B%E6%8A%8A%E6%89%8B%E6%95%99%E4%BD%A0/"},{"name":"Swoft","slug":"Swoft","permalink":"https://assert6.github.io/tags/Swoft/"},{"name":"XSS","slug":"XSS","permalink":"https://assert6.github.io/tags/XSS/"},{"name":"å®‰å…¨","slug":"å®‰å…¨","permalink":"https://assert6.github.io/tags/%E5%AE%89%E5%85%A8/"}]}